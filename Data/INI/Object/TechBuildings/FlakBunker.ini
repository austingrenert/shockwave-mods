Object TechFlakCannonBunker

  ; *** ART Parameters ***
  SelectPortrait         = SSFlakBunker_L
  ButtonImage            = SSFlakBunker
  
  
  ; ========================= Main Model ===============================
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    MaxRecoilDistance    = 2
    
    ; DAY **************************************************************
    ConditionState = None
      Model                           = CBFlakBunker
      Turret                          = TURRET
      TurretPitch                     = TURRETEL
      WeaponLaunchBone                = PRIMARY MUZZLEFX
      WeaponRecoilBone                = PRIMARY BARRELF
      WeaponFireFXBone                = PRIMARY MUZZLEFX
      WeaponMuzzleFlash               = PRIMARY Muzzle
      Turret                          = TURRET
    End
    AliasConditionState = NIGHT
    
    ; DAMAGED **********************************************************
    ConditionState = DAMAGED
      Model                           = CBFlakBunker_D
      Turret                          = TURRET
      TurretPitch                     = TURRETEL
      WeaponLaunchBone                = PRIMARY MUZZLEFX
      WeaponRecoilBone                = PRIMARY BARRELF
      WeaponFireFXBone                = PRIMARY MUZZLEFX
      WeaponMuzzleFlash               = PRIMARY Muzzle
      Turret                          = TURRET
    End
    AliasConditionState = NIGHT DAMAGED
    
    ; REALLYDAMAGED ****************************************************
    ConditionState = REALLYDAMAGED
      Model                           = CBFlakBunker_E
      Turret                          = TURRET
      TurretPitch                     = TURRETEL
      WeaponLaunchBone                = PRIMARY MUZZLEFX
      WeaponRecoilBone                = PRIMARY BARRELF
      WeaponFireFXBone                = PRIMARY MUZZLEFX
      WeaponMuzzleFlash               = PRIMARY Muzzle
      Turret                          = TURRET
    End
    AliasConditionState = NIGHT REALLYDAMAGED
    
    ; SNOW *************************************************************
    ConditionState = SNOW
      Model                           = CBFlakBunker_S
      Turret                          = TURRET
      TurretPitch                     = TURRETEL
      WeaponLaunchBone                = PRIMARY MUZZLEFX
      WeaponRecoilBone                = PRIMARY BARRELF
      WeaponFireFXBone                = PRIMARY MUZZLEFX
      WeaponMuzzleFlash               = PRIMARY Muzzle
      Turret                          = TURRET
    End
    AliasConditionState = NIGHT SNOW
    
    ; SNOW DAMAGED *****************************************************
    ConditionState = DAMAGED SNOW
      Model                           = CBFlakBunker_SD
      Turret                          = TURRET
      TurretPitch                     = TURRETEL
      WeaponLaunchBone                = PRIMARY MUZZLEFX
      WeaponRecoilBone                = PRIMARY BARRELF
      WeaponFireFXBone                = PRIMARY MUZZLEFX
      WeaponMuzzleFlash               = PRIMARY Muzzle
      Turret                          = TURRET
    End
    AliasConditionState = NIGHT DAMAGED SNOW
    
    ; SNOW REALLYDAMAGED ***********************************************
    ConditionState = REALLYDAMAGED SNOW
      Model                           = CBFlakBunker_SE
      Turret                          = TURRET
      TurretPitch                     = TURRETEL
      WeaponLaunchBone                = PRIMARY MUZZLEFX
      WeaponRecoilBone                = PRIMARY BARRELF
      WeaponFireFXBone                = PRIMARY MUZZLEFX
      WeaponMuzzleFlash               = PRIMARY Muzzle
      Turret                          = TURRET
    End
    AliasConditionState = REALLYDAMAGED SNOW NIGHT
    
    ;Anti Airplane Weapon states
    ; DAY **************************************************************
    ConditionState = USING_WEAPON_B
      Model                           = CBFlakBunker
      Turret                          = TURRET
      TurretPitch                     = TURRETEL
      WeaponLaunchBone                = SECONDARY MUZZLEFX
      WeaponRecoilBone                = SECONDARY BARRELF
      WeaponFireFXBone                = SECONDARY MUZZLEFX
      WeaponMuzzleFlash               = SECONDARY Muzzle
      Turret                          = TURRET
    End
    AliasConditionState = USING_WEAPON_B NIGHT
    
    ; DAMAGED **********************************************************
    ConditionState = USING_WEAPON_B DAMAGED
      Model                           = CBFlakBunker_D
      Turret                          = TURRET
      TurretPitch                     = TURRETEL
      WeaponLaunchBone                = SECONDARY MUZZLEFX
      WeaponRecoilBone                = SECONDARY BARRELF
      WeaponFireFXBone                = SECONDARY MUZZLEFX
      WeaponMuzzleFlash               = SECONDARY Muzzle
      Turret                          = TURRET
    End
    AliasConditionState = USING_WEAPON_B NIGHT DAMAGED
    
    ; REALLYDAMAGED ****************************************************
    ConditionState = USING_WEAPON_B REALLYDAMAGED
      Model                           = CBFlakBunker_E
      Turret                          = TURRET
      TurretPitch                     = TURRETEL
      WeaponLaunchBone                = SECONDARY MUZZLEFX
      WeaponRecoilBone                = SECONDARY BARRELF
      WeaponFireFXBone                = SECONDARY MUZZLEFX
      WeaponMuzzleFlash               = SECONDARY Muzzle
      Turret                          = TURRET
    End
    AliasConditionState = USING_WEAPON_B NIGHT REALLYDAMAGED
    
    ; SNOW *************************************************************
    ConditionState = USING_WEAPON_B SNOW
      Model                           = CBFlakBunker_S
      Turret                          = TURRET
      TurretPitch                     = TURRETEL
      WeaponLaunchBone                = SECONDARY MUZZLEFX
      WeaponRecoilBone                = SECONDARY BARRELF
      WeaponFireFXBone                = SECONDARY MUZZLEFX
      WeaponMuzzleFlash               = SECONDARY Muzzle
      Turret                          = TURRET
    End
    AliasConditionState = USING_WEAPON_B NIGHT SNOW
    
    ; SNOW DAMAGED *****************************************************
    ConditionState = USING_WEAPON_B DAMAGED SNOW
      Model                           = CBFlakBunker_SD
      Turret                          = TURRET
      TurretPitch                     = TURRETEL
      WeaponLaunchBone                = SECONDARY MUZZLEFX
      WeaponRecoilBone                = SECONDARY BARRELF
      WeaponFireFXBone                = SECONDARY MUZZLEFX
      WeaponMuzzleFlash               = SECONDARY Muzzle
      Turret                          = TURRET
    End
    AliasConditionState = USING_WEAPON_B NIGHT DAMAGED SNOW
    
    ; SNOW REALLYDAMAGED ***********************************************
    ConditionState = USING_WEAPON_B REALLYDAMAGED SNOW
      Model                           = CBFlakBunker_SE
      Turret                          = TURRET
      TurretPitch                     = TURRETEL
      WeaponLaunchBone                = SECONDARY MUZZLEFX
      WeaponRecoilBone                = SECONDARY BARRELF
      WeaponFireFXBone                = SECONDARY MUZZLEFX
      WeaponMuzzleFlash               = SECONDARY Muzzle
      Turret                          = TURRET
    End
    AliasConditionState = USING_WEAPON_B REALLYDAMAGED SNOW NIGHT

  End
  
  Draw = W3DModelDraw ModuleTag_InfantryStationBone01
    ExtraPublicBone = STATION01
    DefaultConditionState
      Model                           = CBTBunker_B
      WeaponLaunchBone                = SECONDARY MUZZLEFX
      WeaponRecoilBone                = SECONDARY BARRELF
      WeaponFireFXBone                = SECONDARY MUZZLEFX
      WeaponMuzzleFlash               = SECONDARY Muzzle
    End
    AliasConditionState = NIGHT
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED
  End
  
  ; ***DESIGN parameters *** ;rto look here
  DisplayName      = OBJECT:FlakBunker
  EditorSorting     = STRUCTURE
  Side = Tech_Buildings
  VisionRange       = 450.0         ; Shroud clearing distance
  ShroudClearingRange = 450
  
  WeaponSet
    Conditions          = NONE
    Weapon              = PRIMARY FlakBunkerWeaponGround
    Weapon              = SECONDARY FlakBunkerWeaponAir
    ShareWeaponReloadTime = Yes
  End
  
  ArmorSet
    Conditions      = None
    Armor           = TechFlakStructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  
  CommandSet       = TechBuildingMGBunkerCommandSet ;Upgrade

  ; *** AUDIO Parameters ***
  VoiceSelect           = FlakBunkerSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = NoSound
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE TECH_BUILDING CAN_ATTACK TECH_BASE_DEFENSE CONSERVATIVE_BUILDING GARRISONABLE_UNTIL_DESTROYED ATTACK_NEEDS_LINE_OF_SIGHT

  Body              = StructureBody ModuleTag_05
    MaxHealth       = 1500.0
    InitialHealth   = 1500.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  ExperienceValue     = 20 20 20 20  ; Experience point value at each level

   Behavior = AIUpdateInterface ModuleTag_AI01
    Turret
      TurretTurnRate        = 180  // turn rate, in degrees per sec
      TurretPitchRate       = 180
      AllowsPitch           = Yes
      NaturalTurretPitch    = 15
      ControlledWeaponSlots = PRIMARY SECONDARY
      RecenterTime          = 10000
    End

    AutoAcquireEnemiesWhenIdle = Yes ;ATTACK_BUILDINGS; defensive weapon
    MoodAttackCheckRate        = 33
  End
  
  Behavior = GarrisonContain ModuleTag_08
    ContainMax                    = 1
    EnterSound                    = GarrisonEnter
    ExitSound                     = GarrisonExit
    ImmuneToClearBuildingAttacks  = No
    IsEnclosingContainer          = No
    AllowInsideKindOf             = INFANTRY
    ForbidInsideKindOf            = DOZER VEHICLE
  End


  Behavior = FlammableUpdate ModuleTag_12
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  
  Behavior             = CreateObjectDie ModuleTag_13
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_14
    DeathFX       = FX_StructureSmallDeath
  End
  Behavior = DestroyDie ModuleTag_06
    ;nothing
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
  
  Behavior = BaseRegenerateUpdate ModuleTag_ZOMGAUTOHEAL01
  End 

  
  Geometry            = BOX
  GeometryMajorRadius = 16.0
  GeometryMinorRadius = 16.0
  GeometryHeight      = 20.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End