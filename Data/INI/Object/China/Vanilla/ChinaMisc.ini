Object ChinaHelixGattlingCannon

  ; *** ART Parameters ***
  SelectPortrait         = SNGatTower_L
  ButtonImage            = SNGatTower
  
  
  
  Draw                    = W3DDependencyModelDraw ModuleTag_01
    OkToChangeModelColor  = Yes
    AttachToBoneInContainer = CHASSISBONE

    DefaultConditionState
      Model               = NVHelix_G
      Animation           = NVHelix_G.NVHelix_G
      AnimationMode       = MANUAL
      Turret              = TURRET01
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
    End
    ConditionState        = USING_WEAPON_B
      Model               = NVHelix_G
      Animation           = NVHelix_G.NVHelix_G
      AnimationMode       = MANUAL
      Turret              = TURRET01
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End

    ConditionState        = CONTINUOUS_FIRE_SLOW
      Model               = NVHelix_G
      Animation           = NVHelix_G.NVHelix_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    ConditionState        = CONTINUOUS_FIRE_SLOW USING_WEAPON_B
      Model               = NVHelix_G
      Animation           = NVHelix_G.NVHelix_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End

     ConditionState       = CONTINUOUS_FIRE_MEAN
      Model               = NVHelix_G
      Animation           = NVHelix_G.NVHelix_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  medium-fast
    End
    ConditionState        = CONTINUOUS_FIRE_MEAN USING_WEAPON_B
      Model               = NVHelix_G
      Animation           = NVHelix_G.NVHelix_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  medium-fast
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX 
    End

    ConditionState        = CONTINUOUS_FIRE_FAST
      Model               = NVHelix_G
      Animation           = NVHelix_G.NVHelix_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  vryfst
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone     = Muzzle02 GattlingMuzzleSmoke
    End
    ConditionState        = CONTINUOUS_FIRE_FAST USING_WEAPON_B 
      Model               = NVHelix_G
      Animation           = NVHelix_G.NVHelix_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  vryfst
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone     = Muzzle02 GattlingMuzzleSmoke
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End

    ConditionState        = REALLYDAMAGED 
      Model               = NVHelix_GD
      Turret              = TURRET01
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      ParticleSysBone     = Smoke01 SmokeFactionMedium
      ParticleSysBone     = Smoke02 SmokeFactionMedium
      ParticleSysBone     = Smoke03 SmokeFactionMedium
      ParticleSysBone     = SparkM01 SparksMedium
      ParticleSysBone     = SparkM02 SparksMedium
    End
    ConditionState        = REALLYDAMAGED USING_WEAPON_B 
      Model               = NVHelix_GD
      Turret              = TURRET01
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      ParticleSysBone     = Smoke01 SmokeFactionMedium
      ParticleSysBone     = Smoke02 SmokeFactionMedium
      ParticleSysBone     = Smoke03 SmokeFactionMedium
      ParticleSysBone     = SparkM01 SparksMedium
      ParticleSysBone     = SparkM02 SparksMedium
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End

    ConditionState        = CONTINUOUS_FIRE_SLOW REALLYDAMAGED 
      Model               = NVHelix_GD
      Animation           = NVHelix_G.NVHelix_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    ConditionState        = CONTINUOUS_FIRE_SLOW REALLYDAMAGED USING_WEAPON_B 
      Model               = NVHelix_GD
      Animation           = NVHelix_G.NVHelix_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End

     ConditionState       = CONTINUOUS_FIRE_MEAN REALLYDAMAGED 
      Model               = NVHelix_GD
      Animation           = NVHelix_G.NVHelix_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  medium-fast
    End
    ConditionState        = CONTINUOUS_FIRE_MEAN REALLYDAMAGED USING_WEAPON_B 
      Model               = NVHelix_GD
      Animation           = NVHelix_G.NVHelix_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  medium-fast
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End

    ConditionState        = CONTINUOUS_FIRE_FAST REALLYDAMAGED 
      Model               = NVHelix_GD
      Animation           = NVHelix_G.NVHelix_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke
    End
    ConditionState        = CONTINUOUS_FIRE_FAST REALLYDAMAGED USING_WEAPON_B 
      Model               = NVHelix_GD
      Animation           = NVHelix_G.NVHelix_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  vryfst
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone     = Muzzle02 GattlingMuzzleSmoke
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End

  End

  ; ***DESIGN parameters ***
  Side             = China
  EditorSorting    = SYSTEM
  TransportSlotCount = 1

  WeaponSet
    Conditions          = None
    Weapon              = PRIMARY Helix_GattlingGun
;    PreferredAgainst    = PRIMARY INFANTRY
;    Weapon              = SECONDARY Helix_GattlingGunAir
;    PreferredAgainst    = SECONDARY BALLISTIC_MISSILE AIRCRAFT
  End
  
  WeaponSet
    Conditions          = PLAYER_UPGRADE
    Weapon              = PRIMARY Helix_AdvancedGattlingGun
;    PreferredAgainst    = PRIMARY INFANTRY
;    Weapon              = SECONDARY Helix_AdvancedGattlingGunAir
;    PreferredAgainst    = SECONDARY BALLISTIC_MISSILE AIRCRAFT
  End
  
  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End
  VisionRange     = 200

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound ;TurretMoveLoop
    VoiceRapidFire  = NoSound
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD PORTABLE_STRUCTURE CAN_ATTACK CLICK_THROUGH IGNORED_IN_GUI
  
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = StealthDetectorUpdate ModuleTag_SDU
    DetectionRate     = 1500   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange   = 200    
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = Yes ;Contained means being in a transport or tunnel network.
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY 
      TurretTurnRate      = 120   // turn rate, in degrees per sec
      TurretPitchRate     = 120
      MinPhysicalPitch    = -70 ; If allows pitch, the lowest I can dip down to shoot.  defaults to 0 (horizontal)
      NaturalTurretPitch  = -18
      AllowsPitch         = Yes
      MinIdleScanAngle      = 10
      MaxIdleScanAngle      = 40
      MinIdleScanInterval   = 5000
      MaxIdleScanInterval   = 10000
    End
    AutoAcquireEnemiesWhenIdle = Yes 
  End

  Behavior             = DestroyDie ModuleTag_04
    ;nothing
  End

  Behavior = WeaponBonusUpgrade ModuleTag_05
    TriggeredBy = Upgrade_ChinaChainGuns
  End

  Behavior = WeaponSetUpgrade ModuleTag_Blah05
    TriggeredBy = Upgrade_ChinaChainGuns
  End



  Geometry            = BOX
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight      = 9.0
  GeometryIsSmall     = No      
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End

Object ChinaHelixPropagandaTower

  ; *** ART Parameters ***
  Draw = W3DDependencyModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    AttachToBoneInContainer = FIREPOINT01
    
    DefaultConditionState
      Model               = NVDeva_U2
    End
  End

  ; ***DESIGN parameters ***
  Side             = China
  EditorSorting    = SYSTEM
  TransportSlotCount = 1
  
  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End
  VisionRange     = 200

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
   TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound ;TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD PORTABLE_STRUCTURE IGNORED_IN_GUI CLICK_THROUGH NO_COLLIDE FS_FAKE
    Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    ;<No Data>
  End
  
  Behavior        = PropagandaTowerBehavior ModuleTag_04
    Radius                = 150.0
    DelayBetweenUpdates   = 2000 ; in milliseconds
    HealPercentEachSecond = 1%   ; get this % of max health every second 
    PulseFX               = FX_HelixPropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 2%   ; get this % of max health every second 
    UpgradedPulseFX       = FX_HelixPropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates

  End

  Behavior             = DestroyDie ModuleTag_05
    ;<No Data>
  End

  Geometry            = BOX
  GeometryMajorRadius = 1.0
  GeometryMinorRadius = 1.0
  GeometryHeight      = 1.0
  GeometryIsSmall     = Yes
  Scale               = 10.0
  ShadowTexture = SCC_Propaganda
  ShadowSizeX = 270
  ShadowSizeY = 270

End

Object ChinaHelixBattleBunker

  ; *** ART Parameters ***
  SelectPortrait         = SNBunker_L
  ButtonImage            = SNBunker
  
  
  Draw                    = W3DDependencyModelDraw ModuleTag_01
    OkToChangeModelColor  = Yes
    AttachToBoneInContainer = CHASSISBONE

    ConditionState = NONE
      Model         = NVHELIX_B
    End
    ConditionState = REALLYDAMAGED
      Model         = NVHELIX_BD
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Flame01 SmolderingFire
      ParticleSysBone = Flame01 SmolderingFlameCore
      ParticleSysBone = Spark01 LiveWireSparks
    End
    ; night
    ConditionState = NIGHT
      Model         = NVHELIX_B
    End 
    ConditionState = NIGHT REALLYDAMAGED
      Model         = NVHELIX_BD
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Flame01 SmolderingFire
      ParticleSysBone = Flame01 SmolderingFlameCore
      ParticleSysBone = Spark01 LiveWireSparks
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  Side             = China
  EditorSorting    = SYSTEM
  TransportSlotCount = 1
  
  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End
  VisionRange     = 200

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound ;TurretMoveLoop
    VoiceUnload     = OverlordTankVoiceUnload
  End

  Behavior = TransportContain ModuleTag_03
    Slots                 = 1
    PassengersAllowedToFire = Yes
    AllowInsideKindOf  = INFANTRY
    EnterSound      = GarrisonEnter
    ExitSound       = GarrisonExit
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD PORTABLE_STRUCTURE CLICK_THROUGH IGNORED_IN_GUI
    Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End


  Behavior             = DestroyDie ModuleTag_04
    ;nothing
  End

  Geometry            = BOX
  GeometryMajorRadius = 6.0
  GeometryMinorRadius = 6.0
  GeometryHeight      = 10.0
  GeometryIsSmall     = No      
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End

Object ChinaTankOverlordGattlingCannon

  ; *** ART Parameters ***
  SelectPortrait         = SNGatTower_L
  ButtonImage            = SNGatTower
  
  ;UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo1 = Upgrade_ChinaUraniumShells
  UpgradeCameo2 = Upgrade_ChinaNuclearTanks
  ;UpgradeCameo4 = NONE
  UpgradeCameo5 = Upgrade_ChinaOverlordGattlingCannon
  
  
  Draw                    = W3DDependencyModelDraw ModuleTag_01
    OkToChangeModelColor  = Yes
    AttachToBoneInContainer = FIREPOINT01

    DefaultConditionState
      Model               = NVOvrlrd_G
      Animation           = NVOvrlrd_G.NVOvrlrd_G
      AnimationMode       = MANUAL
      Turret              = TURRET01
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
    End
    ConditionState        = USING_WEAPON_B
      Model               = NVOvrlrd_G
      Animation           = NVOvrlrd_G.NVOvrlrd_G
      AnimationMode       = MANUAL
      Turret              = TURRET01
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End

    ConditionState        = CONTINUOUS_FIRE_SLOW
      Model               = NVOvrlrd_G
      Animation           = NVOvrlrd_G.NVOvrlrd_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    ConditionState        = CONTINUOUS_FIRE_SLOW USING_WEAPON_B
      Model               = NVOvrlrd_G
      Animation           = NVOvrlrd_G.NVOvrlrd_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End

     ConditionState       = CONTINUOUS_FIRE_MEAN
      Model               = NVOvrlrd_G
      Animation           = NVOvrlrd_G.NVOvrlrd_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  medium-fast
    End
    ConditionState        = CONTINUOUS_FIRE_MEAN USING_WEAPON_B
      Model               = NVOvrlrd_G
      Animation           = NVOvrlrd_G.NVOvrlrd_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  medium-fast
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX 
    End

    ConditionState        = CONTINUOUS_FIRE_FAST
      Model               = NVOvrlrd_G
      Animation           = NVOvrlrd_G.NVOvrlrd_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  vryfst
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone     = Muzzle02 GattlingMuzzleSmoke
    End
    ConditionState        = CONTINUOUS_FIRE_FAST USING_WEAPON_B 
      Model               = NVOvrlrd_G
      Animation           = NVOvrlrd_G.NVOvrlrd_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  vryfst
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone     = Muzzle02 GattlingMuzzleSmoke
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End

    ConditionState        = REALLYDAMAGED 
      Model               = NVOvrlrd_GD
      Turret              = TURRET01
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      ParticleSysBone     = Smoke01 SmokeFactionMedium
      ParticleSysBone     = Smoke02 SmokeFactionMedium
      ParticleSysBone     = Smoke03 SmokeFactionMedium
      ParticleSysBone     = SparkM01 SparksMedium
      ParticleSysBone     = SparkM02 SparksMedium
    End
    ConditionState        = REALLYDAMAGED USING_WEAPON_B 
      Model               = NVOvrlrd_GD
      Turret              = TURRET01
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      ParticleSysBone     = Smoke01 SmokeFactionMedium
      ParticleSysBone     = Smoke02 SmokeFactionMedium
      ParticleSysBone     = Smoke03 SmokeFactionMedium
      ParticleSysBone     = SparkM01 SparksMedium
      ParticleSysBone     = SparkM02 SparksMedium
    End

    ConditionState        = CONTINUOUS_FIRE_SLOW REALLYDAMAGED 
      Model               = NVOvrlrd_GD
      Animation           = NVOvrlrd_G.NVOvrlrd_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    ConditionState        = CONTINUOUS_FIRE_SLOW REALLYDAMAGED USING_WEAPON_B 
      Model               = NVOvrlrd_GD
      Animation           = NVOvrlrd_G.NVOvrlrd_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End

     ConditionState       = CONTINUOUS_FIRE_MEAN REALLYDAMAGED 
      Model               = NVOvrlrd_GD
      Animation           = NVOvrlrd_G.NVOvrlrd_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  medium-fast
    End
    ConditionState        = CONTINUOUS_FIRE_MEAN REALLYDAMAGED USING_WEAPON_B 
      Model               = NVOvrlrd_GD
      Animation           = NVOvrlrd_G.NVOvrlrd_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  medium-fast
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End

    ConditionState        = CONTINUOUS_FIRE_FAST REALLYDAMAGED 
      Model               = NVOvrlrd_GD
      Animation           = NVOvrlrd_G.NVOvrlrd_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke
    End
    ConditionState        = CONTINUOUS_FIRE_FAST REALLYDAMAGED USING_WEAPON_B 
      Model               = NVOvrlrd_GD
      Animation           = NVOvrlrd_G.NVOvrlrd_G
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  vryfst
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone     = Muzzle02 GattlingMuzzleSmoke
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End

  End

  ; ***DESIGN parameters ***
  Side             = China
  EditorSorting    = SYSTEM
  TransportSlotCount = 1
  
  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY   Overlord_GattlingGun
    Weapon              = SECONDARY Overlord_GattlingGunAir
    PreferredAgainst    = SECONDARY BALLISTIC_MISSILE AIRCRAFT
  End

  WeaponSet
    Conditions          = PLAYER_UPGRADE
    Weapon              = PRIMARY Overlord_AdvancedGattlingGun
    Weapon              = SECONDARY Overlord_AdvancedGattlingGunAir
    PreferredAgainst    = SECONDARY BALLISTIC_MISSILE AIRCRAFT
  End
  
  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End
  VisionRange     = 200

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound ;TurretMoveLoop
    VoiceRapidFire  = NoSound
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD PORTABLE_STRUCTURE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CLICK_THROUGH IGNORED_IN_GUI
    Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY
      TurretTurnRate      = 120   // turn rate, in degrees per sec
      TurretPitchRate     = 120
      AllowsPitch         = Yes
      MinIdleScanAngle      = 10
      MaxIdleScanAngle      = 40
      MinIdleScanInterval   = 5000
      MaxIdleScanInterval   = 10000
    End
    AutoAcquireEnemiesWhenIdle = Yes 
  End

  Behavior             = DestroyDie ModuleTag_04
    ;nothing
  End

  Behavior = WeaponBonusUpgrade ModuleTag_05
    TriggeredBy = Upgrade_ChinaChainGuns
  End

  Behavior = WeaponSetUpgrade ModuleTag_Blah05
    TriggeredBy = Upgrade_ChinaChainGuns
  End

  Behavior = StealthDetectorUpdate ModuleTag_06
    DetectionRate   = 500   ; how often to rescan for stealthed things in my sight (msec)
    ;DetectionRange = ??? ;   Defaults to VisionRange
    CanDetectWhileContained   = Yes
  End

  Geometry            = BOX
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight      = 9.0
  GeometryIsSmall     = No      
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

Object ChinaTankOverlordPropagandaTower

  ; *** ART Parameters ***
  Draw                    = W3DDependencyModelDraw ModuleTag_01
    AttachToBoneInContainer            = FIREPOINT01
    
    DefaultConditionState
      Model               = NVDeva_U2
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  Side             = China
  EditorSorting    = SYSTEM
  TransportSlotCount = 1
  
  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End
  VisionRange     = 200

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
   TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound ;TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD PORTABLE_STRUCTURE IGNORED_IN_GUI CLICK_THROUGH NO_COLLIDE FS_FAKE
    Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    ;<No Data>
  End
  
  Behavior        = PropagandaTowerBehavior ModuleTag_04
    Radius                = 150.0
    DelayBetweenUpdates   = 2000 ; in milliseconds
    HealPercentEachSecond = 1%   ; get this % of max health every second 
    PulseFX               = FX_OverlordPropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 2%   ; get this % of max health every second 
    UpgradedPulseFX       = FX_OverlordPropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates

  End

  Behavior             = DestroyDie ModuleTag_05
    ;<No Data>
  End

  Geometry            = BOX
  GeometryMajorRadius = 1.0
  GeometryMinorRadius = 1.0
  GeometryHeight      = 1.0
  GeometryIsSmall     = Yes
  Scale               = 10.0
  ShadowTexture = SCC_Propaganda
  ShadowSizeX = 270
  ShadowSizeY = 270

End

Object ChinaTankOverlordBattleBunker

  ; *** ART Parameters ***
  SelectPortrait         = SNBunker_L
  ButtonImage            = SNBunker
  
  ;UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo1 = Upgrade_ChinaUraniumShells
  UpgradeCameo2 = Upgrade_ChinaNuclearTanks
  ;UpgradeCameo4 = NONE
  UpgradeCameo5 = Upgrade_ChinaOverlordBattleBunker
  
  Draw                    = W3DDependencyModelDraw ModuleTag_01
    OkToChangeModelColor  = Yes
    AttachToBoneInContainer = FIREPOINT01

    ConditionState = NONE
      Model         = NVOvrlrd_B
    End
    ConditionState = REALLYDAMAGED
      Model         = NVOvrlrd_BD
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Flame01 SmolderingFire
      ParticleSysBone = Flame01 SmolderingFlameCore
      ParticleSysBone = Spark01 LiveWireSparks
    End
    ; night
    ConditionState = NIGHT
      Model         = NVOvrlrd_B
    End 
    ConditionState = NIGHT REALLYDAMAGED
      Model         = NVOvrlrd_BD
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Flame01 SmolderingFire
      ParticleSysBone = Flame01 SmolderingFlameCore
      ParticleSysBone = Spark01 LiveWireSparks
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  Side             = China
  EditorSorting    = SYSTEM
  TransportSlotCount = 1
  
  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End
  VisionRange     = 200

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound ;TurretMoveLoop
    VoiceUnload     = OverlordTankVoiceUnload
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD PORTABLE_STRUCTURE CLICK_THROUGH IGNORED_IN_GUI
    Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = TransportContain ModuleTag_03
    Slots                 = 5
    PassengersAllowedToFire = Yes
    AllowInsideKindOf  = INFANTRY
    ForbidInsideKindOf = BOAT
    EnterSound      = GarrisonEnter
    ExitSound       = GarrisonExit
    DamagePercentToUnits  = 0%
  End

  Behavior             = DestroyDie ModuleTag_04
    ;nothing
  End

  Geometry            = BOX
  GeometryMajorRadius = 6.0
  GeometryMinorRadius = 6.0
  GeometryHeight      = 10.0
  GeometryIsSmall     = No      
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object ChinaWall

  ; *** ART Parameters ***
  SelectPortrait         = SNWall_L
  ButtonImage            = SNWall
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    DefaultConditionState
      Model         = NBWall02Y
    End
    ConditionState = DAMAGED
      Model         = NBWall02Y_D
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model         = NBWall02Y_E
    End
    
    ConditionState = SNOW
      Model         = NBWall02Y_S
    End
    ConditionState = DAMAGED SNOW
      Model         = NBWall02Y_DS
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model         = NBWall02Y_ES
    End
    
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ConcreteWall
  Side = China
  EditorSorting    = STRUCTURE

  BuildCost           = 100
  BuildTime           = 2.0           ; in seconds
  VisionRange         = 150.0           ; Shroud clearing distance
  ShroudClearingRange = 150
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  FenceWidth      = 9  ; Spacing used by the fence tool in worldbuilder.
  FenceXOffset    = 0   ; Offset used by the fence tool in worldbuilder so corners line up.
  CrushableLevel  = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD STRUCTURE SELECTABLE STICK_TO_TERRAIN_SLOPE IMMOBILE LINEBUILD DEFENSIVE_WALL
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0

  End

  Behavior                 = DestroyDie ModuleTag_03
    ; none
  End
  Behavior                 = CreateObjectDie ModuleTag_04
    CreationList      = OCL_GenericWallSegmentDebris
  End
  Behavior                 = FXListDie ModuleTag_05
    DeathFX           = FX_GenericWallSegmentDeath
  End

  Geometry            = BOX
  GeometryMajorRadius = 4.0
  GeometryMinorRadius = 6.0
  GeometryHeight      = 12.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
;Added for the Hub piece
Object ChinaWallHub

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState = NONE
      Model         = NBWall02X
    End
    ConditionState = DAMAGED
      Model         = NBWall02X_D
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model         = NBWall02X_E
    End
    
    ConditionState = SNOW
      Model         = NBWall02X_S
    End
    ConditionState = DAMAGED SNOW
      Model         = NBWall02X_DS
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model         = NBWall02X_ES
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Wall
  Side = China
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = ChinaBarracks
  End
  BuildCost        = 50
  BuildTime        = 1.0           ; in seconds
  VisionRange      = 150.0           ; Shroud clearing distance
  ShroudClearingRange = 150
  ArmorSet
    Conditions      = None
    Armor           = WallArmor
    DamageFX        = StructureDamageFXNoShake
  End

  FenceWidth      = 12  ; Spacing used by the fence tool in worldbuilder.
  FenceXOffset    = 0   ; Offset used by the fence tool in worldbuilder so corners line up.
  CrushableLevel  = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD STRUCTURE SELECTABLE STICK_TO_TERRAIN_SLOPE IMMOBILE LINEBUILD DEFENSIVE_WALL
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior                 = DestroyDie ModuleTag_03
    ; none
  End
  Behavior                 = CreateObjectDie ModuleTag_04
    CreationList      = OCL_GenericWallSegmentDebris
  End
  Behavior                 = FXListDie ModuleTag_05
    DeathFX           = FX_GenericWallSegmentDeath
  End

  Geometry            = BOX
  GeometryMajorRadius = 4.0
  GeometryMinorRadius = 6.0
  GeometryHeight      = 12.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
Object ChinaMoat

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ConditionState = NONE
      Model = TempBldgSm
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Moat
  Side = China
  EditorSorting    = STRUCTURE
  BuildCost        = 100
  BuildTime        = 2.0           ; in seconds
  EnergyProduction = 0
  VisionRange     = 50.0           ; Shroud clearing distance
  ShroudClearingRange = 50
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD STRUCTURE SELECTABLE STICK_TO_TERRAIN_SLOPE IMMOBILE LINEBUILD
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0
  End
  Behavior = DestroyDie ModuleTag_03
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_04
    CreationList  = OCL_SmallStructureDebris
  End
  Behavior             = FXListDie ModuleTag_05
    DeathFX       = FX_SmallStructureDeath
  End
  Geometry            = BOX
  GeometryMajorRadius = 7.0
  GeometryMinorRadius = 7.0
  GeometryHeight      = 9.0
  GeometryIsSmall     = Yes
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End


;------------------------------------------------------------------------------
Object ChinaJetMIG_CinematicVersion

  ; *** ART Parameters ***
  SelectPortrait         = SNMig_L
  ButtonImage            = SNMig
  
  UpgradeCameo1 = Upgrade_ChinaAircraftArmor
  UpgradeCameo2 = Upgrade_ChinaBlackNapalm
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    DefaultConditionState
      Model               = NVMIG
      HideSubObject       = BurnerFX01 BurnerFX02
      WeaponLaunchBone    = PRIMARY WeaponA
    End

    ConditionState        = JETEXHAUST
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState       = JETEXHAUST JETAFTERBURNER
      ShowSubObject      = BurnerFX01 BurnerFX02
      ParticleSysBone     = Exhaust01 JetExhaust
      ParticleSysBone     = Exhaust02 JetExhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState        = REALLYDAMAGED
      Model               = NVMIG_D
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState        = RUBBLE
      Model               = NVMIG_D
    End

    ConditionState        = REALLYDAMAGED JETEXHAUST
      Model               = NVMIG_D
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState        = REALLYDAMAGED JETEXHAUST JETAFTERBURNER
      Model               = NVMIG_D
      ShowSubObject       = BurnerFX01 BurnerFX02
      ParticleSysBone     = Engine01 JetExhaust
      ParticleSysBone     = Engine02 JetExhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState        = RUBBLE JETEXHAUST JETAFTERBURNER
      ; @todo srj -- model missing
      ;Model              = NVMIG_D1B
      Model               = NVMIG_D
      ;HideSubObject is needed cause there're inherited from default condition state      
      HideSubObject       = None 
      ShowSubObject       = None
      ParticleSysBone     = Engine01 JetExhaust
      ParticleSysBone     = Engine02 JetExhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

  End

  ; ***DESIGN parameters ***
  DisplayName             = OBJECT:MIG
  EditorSorting           = VEHICLE
  Side                    = China
  TransportSlotCount      = 0          ;how many "slots" we take in a transport (0 == not transportable)
  VisionRange             = 300.0 
  ShroudClearingRange     = 300.0

  Prerequisites
    Object                = ChinaAirfield
  End

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY     NapalmMissileWeapon
    AutoChooseSources = PRIMARY     NONE
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon            = PRIMARY     BlackNapalmMissileWeapon
    AutoChooseSources = PRIMARY     NONE
  End

  ArmorSet
    Conditions           = None
    Armor                = AirplaneArmor
    DamageFX             = None
  End

  BuildCost               = 1200
  BuildTime               = 15   
  ExperienceValue         = 50 50 100 150   ;Experience point value at each level
  ExperienceRequired      = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 1  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet             = ChinaJetMIGCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect             = MigVoiceSelect
  VoiceMove               = MigVoiceMove
  VoiceAttack             = MigVoiceAttack
  VoiceAttackAir          = MigVoiceAttackAir
  VoiceGuard              = MigVoiceAirPatrol
  SoundMoveLoop           = MigAmbientLoop  ; don't want sound while sitting at airfield
  SoundAmbient            = NoSound
  SoundAmbientRubble      = NoSound
  UnitSpecificSounds
    VoiceCreate           = MigVoiceCreate
    Afterburner           = RaptorAfterburner
    VoiceGarrison         = MigVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority          = UNIT
  KindOf                 = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK SELECTABLE VEHICLE SCORE AIRCRAFT
  Body                   = ActiveBody ModuleTag_02
    MaxHealth            = 160.0
    InitialHealth        = 160.0
  End

  Behavior                          = JetSlowDeathBehavior ModuleTag_03
    FXOnGroundDeath                 = FX_JetOnGroundDeath
    OCLOnGroundDeath                = OCL_MIGDeathFinalBlowUp_CinematicVersion
    DestructionDelay                = 99999999  ; destruction will happen when we
    RollRate                        = 0.2
    RollRateDelta                   = 100%      ;each frame, rollrate = rollrate * rollrateDelta
    PitchRate                       = 0.0
    FallHowFast                     = 110.0%    ;Bigger is faster (can be over 100%,it's a fraction of gravity)
    FXInitialDeath                  = FX_MigDeathInitial
    OCLInitialDeath                 = OCL_MIGDeathInitial
    DelaySecondaryFromInitialDeath  = 500       ; in milliseconds
    FXSecondary                     = FX_JetDeathSecondary
    OCLSecondary                    = OCL_MIGDeathSecondary
    FXHitGround                     = FX_JetDeathHitGround
    OCLHitGround                    = OCL_MIGDeathHitGround
    DelayFinalBlowUpFromHitGround   = 200       ; in milliseconds
    FXFinalBlowUp                   = FX_JetDeathFinalBlowUp_CinematicVersion
    OCLFinalBlowUp                  = OCL_MIGDeathFinalBlowUp_CinematicVersion
  End

  Behavior = WeaponSetUpgrade ModuleTag_04
    TriggeredBy = Upgrade_ChinaBlackNapalm
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 500.0
  End

  Behavior = JetAIUpdate ModuleTag_06
    OutOfAmmoDamagePerSecond  = 10%     ; amount of damage to take per SEC (not per frame) when out of ammo
                                        ; note that it's expressed as a percent of max health, not an absolute
    TakeoffDistForMaxLift     = 0%   ; larger numbers give more lift sooner when taking off
    TakeoffPause              = 500
    MinHeight                 = 5
    ReturnToBaseIdleTime      = 10000         ; if idle for this long, return to base, even if not out of ammo
  End

  Locomotor = SET_NORMAL MIGLocomotor
  Locomotor = SET_TAXIING BasicJetTaxiLocomotor


  Behavior = FlammableUpdate ModuleTag_08
    AflameDuration = 5000        ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500      ; this often.
  End

  Behavior                       = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes Psys:SmokeSmallContinuous01
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_MIGDamageTransition
  End

  Behavior        = MaxHealthUpgrade ModuleTag_10
    TriggeredBy   = Upgrade_ChinaAircraftArmor
    AddMaxHealth  = 40.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End



  Geometry                 = Box
  GeometryIsSmall          = Yes
  GeometryMajorRadius      = 14.0
  GeometryMinorRadius      = 7.0
  GeometryHeight           = 5.0
  Shadow                   = SHADOW_VOLUME
  
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End





;------------------------------------------------------------------------------
Object ChinaInfantryParadeRedGuard

; Unit added per John Lee's request. - GB

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; ------- Standing-Around Animations
 
    DefaultConditionState
      Model               = NICNSC_SKN
      IdleAnimation       = NICNSC_SKL.NICNSC_STA 0 35
      IdleAnimation       = NICNSC_SKL.NICNSC_IDA
      IdleAnimation       = NICNSC_SKL.NICNSC_IDB
      AnimationMode       = ONCE
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      TransitionKey       = TRANS_Stand
    End

    ConditionState = REALLYDAMAGED
      IdleAnimation       = NICNSC_SKL.NICNSC_STB
      AnimationMode       = ONCE
      TransitionKey       = TRANS_StandDamaged
    End

    ; ------- Machine Gun Animations

    ConditionState = FIRING_A 
      Animation         = NICNSC_SKL.NICNSC_ATA
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Firing
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    AliasConditionState = RELOADING_A

    ConditionState = USING_WEAPON_A REALLYDAMAGED
      Animation         = NICNSC_SKL.NICNSC_ATC
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringDamaged
    End


    ; ------- Firing-related Transitions

    TransitionState = TRANS_Firing TRANS_FiringDamaged
      Animation       = NICNSC_SKL.NICNSC_AA2AC
      AnimationMode   = ONCE
    End

    TransitionState = TRANS_Stand TRANS_Firing
      Animation       = NICNSC_SKL.NICNSC_SA2AA
      AnimationMode   = ONCE
    End

    TransitionState = TRANS_Firing TRANS_Stand
      Animation       = NICNSC_SKL.NICNSC_AA2SA
      AnimationMode   = ONCE
    End

    TransitionState = TRANS_StandDamaged TRANS_FiringDamaged
      Animation       = NICNSC_SKL.NICNSC_ATCST
      AnimationMode   = ONCE
    End

    TransitionState = TRANS_FiringDamaged TRANS_StandDamaged
      Animation       = NICNSC_SKL.NICNSC_ATCED
      AnimationMode   = ONCE
    End


    ; ------------- Damage Transitions --------------------
    TransitionState = TRANS_StandDamaged TRANS_RunDamaged
      Animation       = NICNSC_SKL.NICNSC_AA2AC
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 2 2
    End
    TransitionState = TRANS_RunDamaged TRANS_StandDamaged 
      Animation       = NICNSC_SKL.NICNSC_AA2AC
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2 2
      Flags           = START_FRAME_LAST
    End
    TransitionState = TRANS_Stand TRANS_StandDamaged 
      Animation       = NICNSC_SKL.NICNSC_AA2SA
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 4 5
      Flags           = START_FRAME_LAST
    End


    ; ------- Bayonet Animations

    ConditionState = PREATTACK_C 
      Animation = NICNSC_SKL.NICNSC_ATB1
      AnimationMode   = ONCE
      TransitionKey   = TRANS_Stab
    End
    AliasConditionState = PREATTACK_C MOVING
    AliasConditionState = PREATTACK_C FIRING_C
    AliasConditionState = PREATTACK_C BETWEEN_FIRING_SHOTS_C

    ConditionState = FIRING_C
      Animation         = NICNSC_SKL.NICNSC_ATB2
      AnimationMode     = ONCE
      ; this is basically a trick: this guy has a nontrivial animation for firing,
      ; and a long recycle time between shots. we want him to finish his fire animation
      ; (unless he's ordered to do something else), so this is just a handy trick that
      ; says, "if the previous state had this transition key, allow it to finish before
      ; switching to us, if possible".
      WaitForStateToFinishIfPossible = TRANS_Stab
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_C
    AliasConditionState = RELOADING_C

    ; ------- Parachuting Animations

    ConditionState = FREEFALL
      Animation       = NICNSC_SKL.NICNSC_POP
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
      TransitionKey   = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState = PARACHUTING
      Animation       = NICNSC_SKL.NICNSC_PHG
      AnimationMode   = LOOP
      Flags           = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey   = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState = TRANS_Falling TRANS_Chute
      Animation       = NICNSC_SKL.NICNSC_POP
      AnimationMode   = ONCE
      Flags           = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState = TRANS_Chute TRANS_Stand
      Animation       = NICNSC_SKL.NICNSC_PTD
      AnimationMode   = ONCE
    End

    ; ------- Movement Animations

    ConditionState = MOVING
      Animation         = NICNSC_SKL.NICNSC_MAR 12
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone     = None InfantryDustTrails
    End
    AliasConditionState = MOVING ATTACKING

    ConditionState = MOVING REALLYDAMAGED
      Animation         = NICNSC_SKL.NICNSC_RNB
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = TRANS_RunDamaged
      ParticleSysBone     = None InfantryDustTrails
    End
    AliasConditionState = MOVING ATTACKING REALLYDAMAGED

    ; ------- Bldg-capture

    ConditionState = UNPACKING
      Animation         = NICNSC_SKL.NICNSC_FDP1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING REALLYDAMAGED

    ConditionState = RAISING_FLAG
      Animation         = NICNSC_SKL.NICNSC_FDP2
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Raising
    End
    AliasConditionState = RAISING_FLAG REALLYDAMAGED

    ConditionState = PACKING
      Animation         = NICNSC_SKL.NICNSC_FDP1
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
      TransitionKey     = TRANS_Packing
    End
    AliasConditionState = PACKING REALLYDAMAGED

    TransitionState = TRANS_Raising TRANS_Packing
      Animation       = NICNSC_SKL.NICNSC_FDP2
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ; ------- Misc Animations

    ; ------- Dying Animations

    ConditionState      = DYING
      Animation         = NICNSC_SKL.NICNSC_DTA
      Animation         = NICNSC_SKL.NICNSC_DTB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = NICNSC_SKL.NICNSC_ATDE1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = NICNSC_SKL.NICNSC_ATDE2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = NICNSC_SKL.NICNSC_ATDE3
      AnimationMode     = ONCE
      TransitionKey     = None
    End

    ConditionState = SPECIAL_CHEERING
      Animation         = NICNSC_SKL.NICNSC_CHA
      AnimationMode     = LOOP
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Redguard
  Side                = China
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY RedguardMachineGun
    Weapon = SECONDARY None
    Weapon = TERTIARY RedguardBayonet
    AutoChooseSources = TERTIARY None
  End
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 100
  ShroudClearingRange = 200
  Prerequisites
    Object = ChinaBarracks
  End
  BuildCost     = 225
  BuildTime     = 10.0          ;in seconds      

  ExperienceValue = 5 5 10 20   ;Experience point value at each level
  ExperienceRequired = 0 20 40 80  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = ChinaInfantryRedguardCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RedGuardVoiceSelect
  VoiceMove = RedGuardVoiceMove
  VoiceAttack = RedGuardVoiceAttack
  VoiceGroupSelect = BattleCrySound

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE PARACHUTABLE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 90.0
    InitialHealth   = 90.0
  End

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_RedGuardTraining
  End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL ParadeRedguardLocomotor

  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 5.0
  End

  Behavior = SquishCollide ModuleTag_09
    ;nothing
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RedGuardDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RedGuardDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireChina
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---
 
  Behavior = PoisonedBehavior ModuleTag_14
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = SpecialAbility ModuleTag_15
    SpecialPowerTemplate = SpecialAbilityRedGuardCaptureBuilding
    UpdateModuleStartsAttack = Yes
    InitiateSound         = RedGuardVoiceCapture
  End
  Behavior = SpecialAbilityUpdate ModuleTag_16
    SpecialPowerTemplate = SpecialAbilityRedGuardCaptureBuilding
    StartAbilityRange = 5.0
    UnpackTime            = 3000  ; (changing this will scale anim speed)
    PreparationTime       = 10000 ; time to complete hack once prepared (changing this will scale anim speed)
    PackTime              = 2000  ; (changing this will scale anim speed)
    DoCaptureFX           = Yes
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
;**************************** Cinematic-Only unit ****************************
Object CINE_ChinaInfantryParadeRedGuard

; Unit added per John Lee's request. - GB

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; ------- Standing-Around Animations
 
    DefaultConditionState
      Model               = NICNSC_SKN
      IdleAnimation       = NICNSC_SKL.NICNSC_STA 0 35
      IdleAnimation       = NICNSC_SKL.NICNSC_IDA
      IdleAnimation       = NICNSC_SKL.NICNSC_IDB
      AnimationMode       = ONCE
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      TransitionKey       = TRANS_Stand
    End

    ConditionState = REALLYDAMAGED
      IdleAnimation       = NICNSC_SKL.NICNSC_STB
      AnimationMode       = ONCE
      TransitionKey       = TRANS_Stand
    End

    ; ------- Machine Gun Animations

    ConditionState = FIRING_A 
      Animation         = NICNSC_SKL.NICNSC_ATA
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Firing
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    AliasConditionState = RELOADING_A

    ConditionState = FIRING_A REALLYDAMAGED
      Animation         = NICNSC_SKL.NICNSC_ATC
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringDamaged
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState = RELOADING_A REALLYDAMAGED


    ; ------- Firing-related Transitions

    TransitionState = TRANS_Firing TRANS_FiringDamaged
      Animation       = NICNSC_SKL.NICNSC_AA2AC
      AnimationMode   = ONCE
    End

    TransitionState = TRANS_Stand TRANS_Firing
      Animation       = NICNSC_SKL.NICNSC_SA2AA
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 40 40
    End

    TransitionState = TRANS_Firing TRANS_Stand
      Animation       = NICNSC_SKL.NICNSC_AA2SA
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 4 4
    End

    TransitionState = TRANS_Stand TRANS_FiringDamaged
      Animation       = NICNSC_SKL.NICNSC_ATCST
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 40 40
    End

    TransitionState = TRANS_FiringDamaged TRANS_Stand
      Animation       = NICNSC_SKL.NICNSC_ATCED
      AnimationMode   = ONCE
       
    End

    ; ------- Bayonet Animations

    ConditionState = PREATTACK_C 
      Animation = NICNSC_SKL.NICNSC_ATB1
      AnimationMode   = ONCE
      TransitionKey   = TRANS_Stab
    End
    AliasConditionState = PREATTACK_C MOVING
    AliasConditionState = PREATTACK_C FIRING_C
    AliasConditionState = PREATTACK_C BETWEEN_FIRING_SHOTS_C

    ConditionState = FIRING_C
      Animation         = NICNSC_SKL.NICNSC_ATB2
      AnimationMode     = ONCE
      ; this is basically a trick: this guy has a nontrivial animation for firing,
      ; and a long recycle time between shots. we want him to finish his fire animation
      ; (unless he's ordered to do something else), so this is just a handy trick that
      ; says, "if the previous state had this transition key, allow it to finish before
      ; switching to us, if possible".
      WaitForStateToFinishIfPossible = TRANS_Stab
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_C
    AliasConditionState = RELOADING_C

    ; ------- Parachuting Animations

    ConditionState = FREEFALL
      Animation       = NICNSC_SKL.NICNSC_POP
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
      TransitionKey   = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState = PARACHUTING
      Animation       = NICNSC_SKL.NICNSC_PHG
      AnimationMode   = LOOP
      Flags           = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey   = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState = TRANS_Falling TRANS_Chute
      Animation       = NICNSC_SKL.NICNSC_POP
      AnimationMode   = ONCE
      Flags           = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState = TRANS_Chute TRANS_Stand
      Animation       = NICNSC_SKL.NICNSC_PTD
      AnimationMode   = ONCE
    End

    ; ------- Movement Animations

    ConditionState = MOVING
      Animation         = NICNSC_SKL.NICNSC_MAR 12
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
    End
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A
    AliasConditionState = MOVING FIRING_B
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_B
    AliasConditionState = MOVING RELOADING_B
    AliasConditionState = MOVING FIRING_C
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_C
    AliasConditionState = MOVING RELOADING_C

    ConditionState = MOVING REALLYDAMAGED
      Animation         = NICNSC_SKL.NICNSC_RNB
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
    End
    AliasConditionState = MOVING FIRING_A REALLYDAMAGED
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState = MOVING RELOADING_A REALLYDAMAGED
    AliasConditionState = MOVING FIRING_B REALLYDAMAGED
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED
    AliasConditionState = MOVING RELOADING_B REALLYDAMAGED
    AliasConditionState = MOVING FIRING_C REALLYDAMAGED
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_C REALLYDAMAGED
    AliasConditionState = MOVING RELOADING_C REALLYDAMAGED

    ; ------- Bldg-capture

    ConditionState = UNPACKING
      Animation         = NICNSC_SKL.NICNSC_FDP1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING REALLYDAMAGED

    ConditionState = RAISING_FLAG
      Animation         = NICNSC_SKL.NICNSC_FDP2
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Raising
    End
    AliasConditionState = RAISING_FLAG REALLYDAMAGED

    ConditionState = PACKING
      Animation         = NICNSC_SKL.NICNSC_FDP1
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
      TransitionKey     = TRANS_Packing
    End
    AliasConditionState = PACKING REALLYDAMAGED

    TransitionState = TRANS_Raising TRANS_Packing
      Animation       = NICNSC_SKL.NICNSC_FDP2
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ; ------- Misc Animations

    ConditionState      = DYING
      Animation         = NICNSC_SKL.NICNSC_DTA
      Animation         = NICNSC_SKL.NICNSC_DTB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = NICNSC_SKL.NICNSC_ATDE1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = NICNSC_SKL.NICNSC_ATDE2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = NICNSC_SKL.NICNSC_ATDE3
      AnimationMode     = ONCE
      TransitionKey     = None
    End

    ConditionState = SPECIAL_CHEERING
      Animation         = NICNSC_SKL.NICNSC_CHA
      AnimationMode     = LOOP
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Redguard
  Side                = China
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY RedguardMachineGun
    Weapon = SECONDARY None
    Weapon = TERTIARY RedguardBayonet
    AutoChooseSources = TERTIARY None
  End
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 100
  ShroudClearingRange = 200
  Prerequisites
    Object = ChinaBarracks
  End
  BuildCost     = 225
  BuildTime     = 10.0          ;in seconds      

  ExperienceValue = 5 5 10 20   ;Experience point value at each level
  ExperienceRequired = 0 20 40 80  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = ChinaInfantryRedguardCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RedGuardVoiceSelect
  VoiceMove = RedGuardVoiceMove
  VoiceAttack = RedGuardVoiceAttack
  VoiceGroupSelect = BattleCrySound

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE PARACHUTABLE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 90.0
    InitialHealth   = 90.0
  End

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_RedGuardTraining
  End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL CINE_ParadeRedguardLocomotor

  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 5.0
  End

  Behavior = SquishCollide ModuleTag_09
    ;nothing
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RedGuardDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RedGuardDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireChina
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---
 
  Behavior = PoisonedBehavior ModuleTag_14
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = SpecialAbility ModuleTag_15
    SpecialPowerTemplate = SpecialAbilityRedGuardCaptureBuilding
    UpdateModuleStartsAttack = Yes
    InitiateSound         = RedGuardVoiceCapture
  End
  Behavior = SpecialAbilityUpdate ModuleTag_16
    SpecialPowerTemplate = SpecialAbilityRedGuardCaptureBuilding
    StartAbilityRange = 5.0
    UnpackTime            = 3000  ; (changing this will scale anim speed)
    PreparationTime       = 10000 ; time to complete hack once prepared (changing this will scale anim speed)
    PackTime              = 2000  ; (changing this will scale anim speed)
    DoCaptureFX           = Yes
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End




;------------------------------------------------------------------------------
Object CINE_DemoTrapDetonationObject ;The explodes-next-frame object when demo trap is triggered.

  ; ***DESIGN parameters ***
  Side = GLA
  EditorSorting   = SYSTEM
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  VisionRange = 0.0  ;Allow the stickybomb to show itself to user?

  ; *** AUDIO Parameters ***

  ; *** ENGINEERING Parameters ***
  RadarPriority = NOT_ON_RADAR
  KindOf = PROJECTILE

  Behavior = PhysicsBehavior ModuleTag_01
    Mass = 5
  End

  ;This determines how long the bomb lives before it explodes (via SlowDeathBehavior)
  Behavior = LifetimeUpdate ModuleTag_02
    MinLifetime = 1   ; min lifetime in msec
    MaxLifetime = 1   ; max lifetime in msec
  End

  Behavior = SlowDeathBehavior ModuleTag_03
    DestructionDelay = 1
    FX                  = INITIAL CINE_WeaponFX_DemoTrapDetonation
    Weapon              = FINAL   DummyWeapon
  End
End




;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
Object CINE_SandExplosionDetonationObject ;The explodes-next-frame object when demo trap is triggered.

  ; ***DESIGN parameters ***
  Side = GLA
  EditorSorting   = SYSTEM
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  VisionRange = 0.0  ;Allow the stickybomb to show itself to user?

  ; *** AUDIO Parameters ***

  ; *** ENGINEERING Parameters ***
  RadarPriority = NOT_ON_RADAR
  KindOf = PROJECTILE

  Behavior = PhysicsBehavior ModuleTag_01
    Mass = 5
  End

  ;This determines how long the bomb lives before it explodes (via SlowDeathBehavior)
  Behavior = LifetimeUpdate ModuleTag_02
    MinLifetime = 1   ; min lifetime in msec
    MaxLifetime = 1   ; max lifetime in msec
  End

  Behavior = SlowDeathBehavior ModuleTag_03
    DestructionDelay = 1
    FX                  = INITIAL WeaponFX_MineDetonation
    Weapon              = FINAL   DummyWeapon
  End
End




;------------------------------------------------------------------------------
;**************************Required For CHI01 INTRO****************************
Object CINE_ChinaTankBattleMaster

  ; *** ART Parameters ***
  SelectPortrait         = SNBattlemaster_L
  ButtonImage            = SNBattlemaster
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model               = CINE_BttlMstr
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
    End
    ConditionState = REALLYDAMAGED
      Model               = NVBtMstr_D
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
    End
    ConditionState = RUBBLE
      Model               = NVBtMstr_D
      Turret              = Turret01
    End

    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.1  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BattleMaster
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY BattleMasterTankGun
  End
  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 800
  BuildTime       = 10.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 300
  Prerequisites
    Object = ChinaWarFactory
  End

  ExperienceValue = 100 100 200 400    ;Experience point value at each level
  ExperienceRequired = 0 200 300 600 ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet       = ChinaVehicleBattleMasterCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BattleMasterTankVoiceSelect
  VoiceMove = BattleMasterTankVoiceMove
  VoiceGuard = BattleMasterTankVoiceMove
  VoiceAttack = BattleMasterTankVoiceAttack
  SoundMoveStart = BattleMasterTankMoveStart
  SoundMoveStartDamaged = BattleMasterTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = BattleMasterTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceCrush = BattleMasterTankVoiceCrush
    VoiceEnter = BattleMasterTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 400.0
    InitialHealth   = 400.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 120   ; turn rate, in degrees per sec
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL CINE_BattleMasterLocomotor
  Locomotor = SET_NORMAL_UPGRADED NuclearBattleMasterLocomotor


  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 40.0
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_06
    DeathWeapon   = NuclearTankDeathWeapon
    StartsActive  = No                        ; turned on by upgrade
    TriggeredBy   = Upgrade_ChinaNuclearTanks
  End
  Behavior = LocomotorSetUpgrade ModuleTag_07
    TriggeredBy = Upgrade_ChinaNuclearTanks
  End

  ; A crushing defeat
  Behavior = DestroyDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  ;Behavior = CreateCrateDie ModuleTag_11
   ; CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  ;End


  Behavior = SlowDeathBehavior ModuleTag_12
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 25
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL    OCL_ChinaTankBattleMasterDebris
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = TransitionDamageFX ModuleTag_13
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 13.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 10     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME    

End





;------------------------------------------------------------------------------
;******************************* Cinematic-Only unit **************************
Object CINE_ChinaTankOverlord

  ; *** ART Parameters ***
  SelectPortrait         = SNOverlord_L
  ButtonImage            = SNOverlord
  
  ;UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo1 = Upgrade_ChinaUraniumShells
  UpgradeCameo2 = Upgrade_ChinaNuclearTanks
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  
  Draw = W3DOverlordTankDraw ModuleTag_01
    ConditionState        = NONE
      Model               = NVOvrlrd
      Animation           = NVOvrlrd.NVOvrlrd
      AnimationMode       = LOOP
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End
    ConditionState        = REALLYDAMAGED
      Model               = NVOvrlrd_d
      Animation           = NVOvrlrd_d.NVOvrlrd_d
      AnimationMode       = LOOP
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End

    ConditionState        = RUBBLE
      Model               = NVOvrlrd_d
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End

    TrackMarks           = EXTnkTrack.tga
    OkToChangeModelColor = Yes
    TreadAnimationRate = 2.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Overlord
  Side                = China
  EditorSorting       = VEHICLE
  TransportSlotCount  = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY OverlordTankGun
  End
  ArmorSet
    Conditions        = None
    Armor             = TankArmor
    DamageFX          = TankDamageFX
  End
  BuildCost       = 1800
  BuildTime       = 20.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 200
  Prerequisites
    Object = ChinaWarFactory
    Object = ChinaPropagandaCenter
  End

  ExperienceValue = 200 200 400 600   ;Experience point value at each level
  ExperienceRequired = 0 400 600 1200  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 3  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = ChinaTankOverlordDefaultCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = OverlordTankVoiceSelect
  SoundMoveStart = OverlordTankMoveStart
  SoundMoveStartDamaged = OverlordTankMoveStart
  VoiceMove = OverlordTankVoiceMove
  VoiceGuard = OverlordTankVoiceMove
  VoiceAttack = OverlordTankVoiceAttack
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = OverlordTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = OverlordTankTurretMoveLoop
    VoiceCrush = OverlordTankVoiceCrush
    VoiceEnter = OverlordTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE HUGE_VEHICLE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1100.0
    InitialHealth   = 1100.0
  End

  Behavior = TransportAIUpdate ModuleTag_03
    Turret
      TurretTurnRate = 60 ;30 ;15   // turn rate, in degrees per sec
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL CINE_OverlordLocomotor
  Locomotor = SET_NORMAL_UPGRADED NuclearOverlordLocomotor

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_04
    DeathWeapon   = NuclearTankDeathWeapon
    StartsActive  = No                        ; turned on by upgrade
    TriggeredBy   = Upgrade_ChinaNuclearTanks
  End
  Behavior = LocomotorSetUpgrade ModuleTag_05
    TriggeredBy = Upgrade_ChinaNuclearTanks
  End

  Behavior = OverlordContain ModuleTag_06 ; Like Transport, but when full, passes transport queries along to first passenger (redirects like tunnel) 
    Slots                 = 1
    DamagePercentToUnits        = 100%
    AllowInsideKindOf     = PORTABLE_STRUCTURE
    PassengersAllowedToFire = Yes
    PassengersInTurret = Yes ; My passengers ride in my turret, that's where the Firepoint bones are
  End

  Behavior = ObjectCreationUpgrade ModuleTag_07
    UpgradeObject = OCL_OverlordGattlingCannon
    TriggeredBy   = Upgrade_ChinaOverlordGattlingCannon
    ConflictsWith = Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordBattleBunker
  End
  Behavior = ObjectCreationUpgrade ModuleTag_08
    UpgradeObject = OCL_OverlordPropagandaTower
    TriggeredBy   = Upgrade_ChinaOverlordPropagandaTower
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordBattleBunker
  End
  Behavior = ObjectCreationUpgrade ModuleTag_09
    UpgradeObject = OCL_OverlordBattleBunker
    TriggeredBy   = Upgrade_ChinaOverlordBattleBunker
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower
  End
  Behavior = ProductionUpdate ModuleTag_10
    ; nothing
  End
  Behavior = CommandSetUpgrade ModuleTag_11
    CommandSet = ChinaTankOverlordGattlingCannonCommandSet
    TriggeredBy   = Upgrade_ChinaOverlordGattlingCannon
    ConflictsWith = Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordBattleBunker
  End
  Behavior = CommandSetUpgrade ModuleTag_12
    CommandSet = ChinaTankOverlordPropagandaTowerCommandSet
    TriggeredBy   = Upgrade_ChinaOverlordPropagandaTower
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordBattleBunker
  End
  Behavior = CommandSetUpgrade ModuleTag_13
    CommandSet = ChinaTankOverlordBattleBunkerCommandSet
    TriggeredBy   = Upgrade_ChinaOverlordBattleBunker
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower
  End

  Behavior = PhysicsBehavior ModuleTag_14
    Mass = 50.0
  End



  ; Smoke for a bit then explode
;  Behavior = SlowDeathBehavior
;;    ProbabilityModifier = 25
;    DestructionDelay = 1500
;    DestructionDelayVariance = 500
;    FX  = INITIAL   FX_OverlordSmoke
;    OCL = FINAL     OCL_ChinaTankOverlordDebris
;    FX  = FINAL     FX_GenericTankDeathExplosion
;  End
  
  ; Catch fire, and explode death
;  Behavior = SlowDeathBehavior
;;    ProbabilityModifier = 25
;    DestructionDelay = 2000
;    DestructionDelayVariance = 300
;    FX  = INITIAL  FX_CrusaderCatchFire
;    OCL = FINAL    OCL_ChinaTankOverlordDebris
;    FX  = FINAL    FX_GenericTankDeathExplosion 
;  End

  ; Just explode death
  Behavior = SlowDeathBehavior ModuleTag_16
    ProbabilityModifier = 25
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL    OCL_ChinaTankOverlordDebris
    FX  = FINAL    FX_OverlordExplosionOneFinal
  End
  Behavior = CreateCrateDie ModuleTag_17
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_OverlordDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 26.0
  GeometryMinorRadius = 13.0
  GeometryHeight = 15.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME     
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;***************************** Cinematic-Only unit ****************************
Object CINE_ChinaVehicleInfernoCannon

  ; *** ART Parameters ***
  SelectPortrait         = SNInferno_L
  ButtonImage            = SNInferno
  
  Draw                    = W3DTankDraw ModuleTag_01
    OkToChangeModelColor  = Yes
    ConditionState        = NONE
      Model               = NVInferno
      Turret              = Turret
      TurretPitch         = TurretEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End
    
    ConditionState        = RUBBLE REALLYDAMAGED
      Model               = NVInferno_D
      Turret              = Turret
      TurretPitch         = TurretEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End
    
    TrackMarks           = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:InfernoCannon
  Side               = China
  EditorSorting      = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions       = None 
    Weapon           = PRIMARY InfernoCannonGun
  End
  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost          = 900
  BuildTime          = 15.0          ;in seconds    
  VisionRange        = 300
  ShroudClearingRange = 300
  Prerequisites
    Object           = ChinaWarFactory
    Object           = ChinaPropagandaCenter
  End

  ExperienceValue = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = ChinaVehicleInfernoCannonCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect       = InfernoCannonVoiceSelect
  VoiceMove         = InfernoCannonVoiceMove
  VoiceGuard        = InfernoCannonVoiceMove
  VoiceAttack       = InfernoCannonVoiceAttack
  SoundMoveStart    = InfernoCannonMoveStart
  SoundMoveStartDamaged = InfernoCannonMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = InfernoCannonVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound
    VoiceCrush          = InfernoCannonVoiceCrush
    VoiceEnter         = InfernoCannonVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf            = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0
  End

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_ArtilleryTraining
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate = 100
      TurretPitchRate = 100
      AllowsPitch = Yes
      FirePitch = 45
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = No NotWhileAttacking
  End
  Locomotor = SET_NORMAL CINE_InfernoLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End

  ; A crushing defeat
  Behavior               = FXListDie ModuleTag_06
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX         = FX_CarCrush
  End
  Behavior               = CreateObjectDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList    = OCL_CrusaderTank_CrushEffect
  End
  Behavior = SlowDeathBehavior ModuleTag_08
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire  
    FX  = FINAL    FX_GenericTankDeathExplosion 
    OCL = FINAL    OCL_InfernoCannonDeathEffect
  End

  Behavior                 = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:-7 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior         = CreateCrateDie ModuleTag_10
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry            = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight      = 15.0     
  GeometryIsSmall     = Yes
  Shadow              = SHADOW_VOLUME    

End




;-----------------------------------------------------------------------------------------------------
;******************************* Cinematic Onlt Unit *************************************************
Object CINE_ChinaVehicleNukeLauncher

  ; *** ART Parameters ***
  SelectPortrait         = SNNukeCannon_L
  ButtonImage            = SNNukeCannon
  
  ;UpgradeCameo1 = NONE
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DTankDraw ModuleTag_01
    
    InitialRecoilSpeed   = 120
    MaxRecoilDistance    = 8
    RecoilSettleSpeed    = 6

    OkToChangeModelColor = Yes

    ExtraPublicBone = Turret01

    DefaultConditionState
      Model                           = NVNukeCn
      WeaponLaunchBone                = PRIMARY Muzzle
      WeaponMuzzleFlash               = PRIMARY MuzzleFX
      WeaponFireFXBone                = PRIMARY Muzzle
      WeaponRecoilBone                = PRIMARY Barrel
      HideSubObject                   = TURRET01      ;Hide controlled turret
      ShowSubObject                   = TURRETFRONT TURRETBACK  ;Show pack/unpack animated turret
      Turret                          = Turret01
      TurretPitch                     = TurretEL
    End
      
    ConditionState                    = RUBBLE
      Model                           = NVNukeCn_D
      WeaponLaunchBone                = PRIMARY Muzzle
      WeaponMuzzleFlash               = PRIMARY MuzzleFX
      WeaponRecoilBone                = PRIMARY Barrel
      HideSubObject                   = TURRET01      ;Hide controlled turret
      ShowSubObject                   = TURRETFRONT TURRETBACK  ;Show pack/unpack animated turret
      Turret                          = Turret01
      TurretPitch                     = TurretEL
    End

    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A ;Very long shot delay -- possibly moving
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    ;***
    ConditionState    = REALLYDAMAGED MOVING
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = REALLYDAMAGED MOVING BETWEEN_FIRING_SHOTS_A ;Very long shot delay -- possibly moving
     

    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = MANUAL
    End
    AliasConditionState = UNPACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay
    ;***
    ConditionState    = REALLYDAMAGED UNPACKING
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = MANUAL
    End
    AliasConditionState = REALLYDAMAGED UNPACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = MANUAL
    End
    AliasConditionState = PACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay
    ;***
    ConditionState    = REALLYDAMAGED PACKING
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = MANUAL
    End
    AliasConditionState = REALLYDAMAGED PACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED 
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      TransitionKey   = TRANS_FIRING_A
      HideSubObject   = TURRETFRONT TURRETBACK   ;Hide pack/unpack animated turret
      ShowSubObject   = TURRET01      ;Show controlled turret
    End
    AliasConditionState = DEPLOYED FIRING_A
    AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_A
    AliasConditionState = DEPLOYED RELOADING_A
    AliasConditionState = DEPLOYED MOVING

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      TransitionKey   = TRANS_FIRING_A
      HideSubObject   = TURRETFRONT TURRETBACK  ;Hide pack/unpack animated turret
      ShowSubObject   = TURRET01      ;Show controlled turret
    End
    AliasConditionState = DEPLOYED REALLYDAMAGED FIRING_A
    AliasConditionState = DEPLOYED REALLYDAMAGED BETWEEN_FIRING_SHOTS_A
    AliasConditionState = DEPLOYED REALLYDAMAGED RELOADING_A
    AliasConditionState = DEPLOYED REALLYDAMAGED MOVING
    
    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 4.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:NukeLauncher
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 10                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY CINE_NukeCannonGun
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 1600
  BuildTime       = 20.0          ;in seconds    
  VisionRange     = 180
  ShroudClearingRange = 350
  Prerequisites
    Object = ChinaWarFactory
    Object = ChinaPropagandaCenter
    Science = SCIENCE_NukeLauncher
  End

  ExperienceValue = 50 100 200 400    ;Experience point value at each level
  ExperienceRequired = 0 400 600 1000  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = ChinaVehicleNukeCannonCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = NukeCannonVoiceSelect
  VoiceMove             = NukeCannonVoiceMove
  VoiceGuard            = NukeCannonVoiceMove
  VoiceAttack           = NukeCannonVoiceAttack
  SoundMoveStart        = NukeCannonMoveStart
  SoundMoveStartDamaged = NukeCannonMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = NukeCannonVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NukeCannonTurretMoveLoop
    VoiceEnter          = NukeCannonVoiceMove
    Deploy              = NukeCannonDeploy
    Undeploy            = NukeCannonUnDeploy
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 240.0
    InitialHealth   = 240.0
  End

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_ArtilleryTraining
  End

  Behavior = DeployStyleAIUpdate ModuleTag_04
    Turret
      TurretTurnRate        = 80
      TurretPitchRate       = 80
      FirePitch             = 0            ; Instead of aiming pitchwise at the target, it will aim here
      AllowsPitch           = Yes
      RecenterTime          = 5000         ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY
      NaturalTurretAngle    = 0
      InitiallyDisabled     = Yes
    End
    AutoAcquireEnemiesWhenIdle = No
    PackTime = 3333
    UnpackTime = 3333
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = Yes
  End

  Locomotor = SET_NORMAL ChinaNukeCannonLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End

  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_BattleMasterExplosionOneFinal
    OCL = INITIAL  OCL_RadiationFieldSmall
    OCL = MIDPOINT OCL_ChinaVehicleNukeCannonDie
    OCL = FINAL    OCL_RadiationFieldSmall
    FX  = FINAL    FX_ChinaVehicleNukeCannonDeathExplosion
  End
    
  ; A crushing defeat
  Behavior = FXListDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_09
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 32.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 17.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End





;------------------------------------------------------------------------------
; *********************** Cinematic-only unit *********************************
Object CINE_ChinaVehicleTroopCrawlerEmpty

  ; *** ART Parameters ***
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
    TrackMarks = EXTireTrack.tga
    ConditionState = NONE
      Model = NVTCrawler
    End
    ConditionState       = REALLYDAMAGED
      Model              = NVTCrawler_D
    End
    ConditionState       = RUBBLE
      Model              = NVTCrawler_D
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TroopCrawler
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY TroopCrawlerAssault
  End
  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 700
  BuildTime       = 1.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 150
  Prerequisites
    Object = ChinaWarFactory
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = ChinaTroopCrawlerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = TroopCrawlerVoiceSelect
  VoiceMove = TroopCrawlerVoiceMove
  VoiceGuard = TroopCrawlerVoiceMove
  VoiceAttack = TroopCrawlerVoiceAttack
  SoundMoveStart = TroopCrawlerMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = TroopCrawlerVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoop
    VoiceUnload     = TroopCrawlerVoiceUnload
    VoiceEnter = TroopCrawlerVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS TRANSPORT VEHICLE SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY
    End
  End
  Locomotor = SET_NORMAL CINE_TroopCrawlerLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End


  Behavior = SlowDeathBehavior  ModuleTag_05
    DeathTypes = ALL
    ProbabilityModifier = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay = 0
    DestructionDelayVariance = 200
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_FinalTroopCrawlerDebris
  End
    
  Behavior = TransportContain ModuleTag_06
    Slots = 10
    HealthRegen%PerSec = 10
    DamagePercentToUnits = 10%
    AllowInsideKindOf  = INFANTRY
  End


  ; A crushing defeat
  Behavior = FXListDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  ;Behavior = CreateCrateDie ModuleTag_09
   ; CrateData = None
    ;CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  ;End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 22.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 13.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME    

End

;------------------------------------------------------------------------------
; ************************* Cinematic-only unit *******************************
Object CINE_ChinaInfantryRedguard

  ; *** ART Parameters ***
  SelectPortrait         = SNRedGuard_L  
  ButtonImage            = SNRedGuard_L
  
  UpgradeCameo1 = Upgrade_Nationalism
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; ------- Standing-Around Animations
 
    DefaultConditionState
      Model               = NICNSC_SKN
      IdleAnimation       = NICNSC_SKL.NICNSC_STA 0 35
      IdleAnimation       = NICNSC_SKL.NICNSC_IDA
      IdleAnimation       = NICNSC_SKL.NICNSC_IDB
      AnimationMode       = ONCE
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      TransitionKey       = TRANS_Stand
    End

    ConditionState = REALLYDAMAGED
      IdleAnimation       = NICNSC_SKL.NICNSC_STB
      AnimationMode       = ONCE
      TransitionKey       = TRANS_StandDamaged
    End

    ; ------- Machine Gun Animations

    ConditionState = FIRING_A 
      Animation         = NICNSC_SKL.NICNSC_ATA
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Firing
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    AliasConditionState = RELOADING_A

    ConditionState = FIRING_A REALLYDAMAGED
      Animation         = NICNSC_SKL.NICNSC_ATC
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringDamaged
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState = RELOADING_A REALLYDAMAGED

    ; ------- Firing-related Transitions

    TransitionState = TRANS_Firing TRANS_FiringDamaged
      Animation       = NICNSC_SKL.NICNSC_AA2AC
      AnimationMode   = ONCE
    End

    TransitionState = TRANS_Stand TRANS_Firing
      Animation       = NICNSC_SKL.NICNSC_SA2AA
      AnimationMode   = ONCE
    End

    TransitionState = TRANS_Firing TRANS_Stand
      Animation       = NICNSC_SKL.NICNSC_AA2SA
      AnimationMode   = ONCE
    End

    TransitionState   = TRANS_StandDamaged TRANS_FiringDamaged
      Animation       = NICNSC_SKL.NICNSC_ATCST
      AnimationMode   = ONCE
    End

    TransitionState   = TRANS_FiringDamaged TRANS_StandDamaged
      Animation       = NICNSC_SKL.NICNSC_ATCED
      AnimationMode   = ONCE
    End

    ; ------------- Damage Transitions --------------------
    TransitionState = TRANS_StandDamaged TRANS_RunDamaged
      Animation       = NICNSC_SKL.NICNSC_AA2AC
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 2 2
    End
    TransitionState = TRANS_RunDamaged TRANS_StandDamaged 
      Animation       = NICNSC_SKL.NICNSC_AA2AC
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2 2
      Flags           = START_FRAME_LAST
    End
    TransitionState = TRANS_Stand TRANS_StandDamaged 
      Animation       = NICNSC_SKL.NICNSC_AA2SA
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 4 5
      Flags           = START_FRAME_LAST
    End


    ; ------- Bayonet Animations

    ConditionState = PREATTACK_C 
      Animation = NICNSC_SKL.NICNSC_ATB1
      AnimationMode   = ONCE
      TransitionKey   = TRANS_Stab
    End
    AliasConditionState = PREATTACK_C MOVING
    AliasConditionState = PREATTACK_C FIRING_C
    AliasConditionState = PREATTACK_C BETWEEN_FIRING_SHOTS_C

    ConditionState = FIRING_C
      Animation         = NICNSC_SKL.NICNSC_ATB2
      AnimationMode     = ONCE
      ; this is basically a trick: this guy has a nontrivial animation for firing,
      ; and a long recycle time between shots. we want him to finish his fire animation
      ; (unless he's ordered to do something else), so this is just a handy trick that
      ; says, "if the previous state had this transition key, allow it to finish before
      ; switching to us, if possible".
      WaitForStateToFinishIfPossible = TRANS_Stab
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_C
    AliasConditionState = RELOADING_C

    ; ------- Parachuting Animations

    ConditionState = FREEFALL
      Animation       = NICNSC_SKL.NICNSC_POP
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
      TransitionKey   = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState = PARACHUTING
      Animation       = NICNSC_SKL.NICNSC_PHG
      AnimationMode   = LOOP
      Flags           = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey   = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState = TRANS_Falling TRANS_Chute
      Animation       = NICNSC_SKL.NICNSC_POP
      AnimationMode   = ONCE
      Flags           = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState = TRANS_Chute TRANS_Stand
      Animation       = NICNSC_SKL.NICNSC_PTD
      AnimationMode   = ONCE
    End

    ; ------- Movement Animations

    ConditionState = MOVING
      Animation         = NICNSC_SKL.NICNSC_RNA 48 ; used to be 26
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
    End
    AliasConditionState = MOVING ATTACKING 

    ConditionState = MOVING REALLYDAMAGED
      Animation         = NICNSC_SKL.NICNSC_RNB 28
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = TRANS_RunDamaged
      TransitionKey     = None
    End
    AliasConditionState = MOVING ATTACKING REALLYDAMAGED

    ; ------- Bldg-capture

    ConditionState = UNPACKING
      Model             = NICNSC_F_SKN
      Animation         = NICNSC_F_SKL.NICNSC_F_FDP1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING REALLYDAMAGED

    ConditionState = RAISING_FLAG
      Model             = NICNSC_F_SKN
      Animation         = NICNSC_F_SKL.NICNSC_F_FDP2
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Raising
    End
    AliasConditionState = RAISING_FLAG REALLYDAMAGED

    ConditionState = PACKING
      Model             = NICNSC_F_SKN
      Animation         = NICNSC_F_SKL.NICNSC_F_FDP1
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
      TransitionKey     = TRANS_Packing
    End
    AliasConditionState = PACKING REALLYDAMAGED

    TransitionState = TRANS_Raising TRANS_Packing
      Model             = NICNSC_F_SKN
      Animation         = NICNSC_F_SKL.NICNSC_F_FDP2
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
    End

    ; ------- Misc Animations

    ConditionState      = DYING
      Animation         = NICNSC_SKL.NICNSC_DTA
      Animation         = NICNSC_SKL.NICNSC_DTB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = NICNSC_SKL.NICNSC_ATDE1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = NICNSC_SKL.NICNSC_ATDE2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = NICNSC_SKL.NICNSC_ATDE3
      AnimationMode     = ONCE
      TransitionKey     = None
    End

    ConditionState = SPECIAL_CHEERING
      Animation         = NICNSC_SKL.NICNSC_CHA
      AnimationMode     = LOOP
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Redguard
  Side                = China
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY RedguardMachineGun
    Weapon = SECONDARY None
    Weapon = TERTIARY RedguardBayonet
    AutoChooseSources = PRIMARY None
    AutoChooseSources = SECONDARY None
    AutoChooseSources = TERTIARY None
  End
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 100
  ShroudClearingRange = 200
  Prerequisites
    Object = ChinaBarracks
  End
  BuildCost     = 300
  BuildTime     = 10.0          ;in seconds      

  ExperienceValue = 5 5 10 20   ;Experience point value at each level
  ExperienceRequired = 0 20 40 80  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = ChinaInfantryRedguardCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RedGuardVoiceSelect
  VoiceMove = RedGuardVoiceMove
  VoiceGuard = RedGuardVoiceMove
  VoiceAttack = RedGuardVoiceAttack
  VoiceGroupSelect = BattleCrySound
  VoiceFear = RedGuardVoiceFear
  VoiceTaskComplete = RedGuardVoiceCaptureComplete
  UnitSpecificSounds
    VoiceGarrison = RedGuardVoiceGarrison
    VoiceCreate     = RedGuardVoiceCreate
    VoiceSubdue     = RedGuardVoiceSubdue
    VoiceEnter = RedGuardVoiceMove
    VoiceEnterHostile = RedGuardVoiceMove
    VoiceGetHealed      = RedGuardVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE PARACHUTABLE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0
  End

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_RedGuardTraining
  End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_05 ; allows use of command button hunt script with this unit. 
  End

  Locomotor = SET_NORMAL CINE_RedguardLocomotor

  Behavior = HordeUpdate ModuleTag_06
    RubOffRadius = 60    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000    ; how often to recheck horde status (msec)
    Radius = 30          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = INFANTRY    ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes     ; do we only count allies towards horde status? 
    ExactMatch = No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5            ; how many units must be within Radius to grant us horde-ness
    Action = HORDE       ; when horde-ing, grant us the HORDE bonus
  End
  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 5.0
  End

  Behavior = SquishCollide ModuleTag_10
    ;nothing
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RedGuardDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RedGuardDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireChina
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---
 
  Behavior = PoisonedBehavior ModuleTag_15
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = SpecialAbility ModuleTag_16
    SpecialPowerTemplate      = SpecialAbilityRedGuardCaptureBuilding
    UpdateModuleStartsAttack  = Yes
    StartsPaused              = Yes
    InitiateSound         = RedGuardVoiceCapture
  End
  Behavior = SpecialAbilityUpdate ModuleTag_17
    SpecialPowerTemplate  = SpecialAbilityRedGuardCaptureBuilding
    StartAbilityRange  = 5.0
    UnpackTime            = 3000  ; (changing this will scale anim speed)
    PreparationTime       = 10000 ; time to complete hack once prepared (changing this will scale anim speed)
    PackTime              = 2000  ; (changing this will scale anim speed)
    DoCaptureFX           = Yes
  End

  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_18
    SpecialPowerTemplate = SpecialAbilityRedGuardCaptureBuilding
    TriggeredBy = Upgrade_InfantryCaptureBuilding
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 7.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End




;------------------------------------------------------------------------------
;************************* Cinematic-only unit ********************************
Object CINE_ChinaJetMIG

  ; *** ART Parameters ***
  SelectPortrait         = SNMig_L
  ButtonImage            = SNMig
  
  UpgradeCameo1 = Upgrade_ChinaAircraftArmor
  UpgradeCameo2 = Upgrade_ChinaBlackNapalm
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    DefaultConditionState
      Model               = NVMIG
      HideSubObject       = BurnerFX01 BurnerFX02
      WeaponLaunchBone    = PRIMARY WeaponA
    End

    ConditionState        = JETEXHAUST
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState       = JETEXHAUST JETAFTERBURNER
      ShowSubObject      = BurnerFX01 BurnerFX02
      ParticleSysBone     = Exhaust01 JetExhaust
      ParticleSysBone     = Exhaust02 JetExhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState        = REALLYDAMAGED
      Model               = NVMIG_D
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState        = RUBBLE
      Model               = NVMIG_D
    End

    ConditionState        = REALLYDAMAGED JETEXHAUST
      Model               = NVMIG_D
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState        = REALLYDAMAGED JETEXHAUST JETAFTERBURNER
      Model               = NVMIG_D
      ShowSubObject       = BurnerFX01 BurnerFX02
      ParticleSysBone     = Engine01 JetExhaust
      ParticleSysBone     = Engine02 JetExhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState        = RUBBLE JETEXHAUST JETAFTERBURNER
      ; @todo srj -- model missing
      ;Model              = NVMIG_D1B
      Model               = NVMIG_D
      ;HideSubObject is needed cause there're inherited from default condition state      
      HideSubObject       = None 
      ShowSubObject       = None
      ParticleSysBone     = Engine01 JetExhaust
      ParticleSysBone     = Engine02 JetExhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

  End

  ; ***DESIGN parameters ***
  DisplayName             = OBJECT:MIG
  EditorSorting           = VEHICLE
  Side                    = China
  TransportSlotCount      = 0          ;how many "slots" we take in a transport (0 == not transportable)
  VisionRange             = 300.0 
  ShroudClearingRange     = 300.0

  Prerequisites
    Object                = ChinaAirfield
  End

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY     NapalmMissileWeapon
    AutoChooseSources = PRIMARY     NONE
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon            = PRIMARY     BlackNapalmMissileWeapon
    AutoChooseSources = PRIMARY     NONE
  End

  ArmorSet
    Conditions           = None
    Armor                = AirplaneArmor
    DamageFX             = None
  End

  BuildCost               = 1000
  BuildTime               = 10   
  ExperienceValue         = 50 50 100 150   ;Experience point value at each level
  ExperienceRequired      = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 1  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet             = ChinaJetMIGCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect             = MigVoiceSelect
  VoiceMove               = MigVoiceMove
  VoiceAttack             = MigVoiceAttack
  VoiceAttackAir          = MigVoiceAttackAir
  VoiceGuard              = MigVoiceAirPatrol
  SoundMoveLoop           = NoSound  ; don't want sound while sitting
  SoundAmbient            = MigAmbientLoop
  SoundAmbientRubble      = NoSound
  UnitSpecificSounds
    VoiceCreate           = MigVoiceCreate
    Afterburner           = RaptorAfterburner
    VoiceGarrison         = MigVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority          = UNIT
  KindOf                 = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK SELECTABLE VEHICLE SCORE AIRCRAFT
  Body                   = ActiveBody ModuleTag_02
    MaxHealth            = 160.0
    InitialHealth        = 160.0
  End

  Behavior                          = JetSlowDeathBehavior ModuleTag_03
    FXOnGroundDeath                 = FX_JetOnGroundDeath
    OCLOnGroundDeath                = OCL_MIGDeathFinalBlowUp_CinematicVersion
    DestructionDelay                = 99999999  ; destruction will happen when we
    RollRate                        = 0.2
    RollRateDelta                   = 100%      ;each frame, rollrate = rollrate * rollrateDelta
    PitchRate                       = 0.0
    FallHowFast                     = 110.0%    ;Bigger is faster (can be over 100%,it's a fraction of gravity)
    FXInitialDeath                  = FX_MigDeathInitial
    OCLInitialDeath                 = OCL_MIGDeathInitial
    DelaySecondaryFromInitialDeath  = 500       ; in milliseconds
    FXSecondary                     = FX_JetDeathSecondary
    OCLSecondary                    = OCL_MIGDeathSecondary
    FXHitGround                     = FX_JetDeathHitGround
    OCLHitGround                    = OCL_MIGDeathHitGround
    DelayFinalBlowUpFromHitGround   = 200       ; in milliseconds
    FXFinalBlowUp                   = FX_JetDeathFinalBlowUp_CinematicVersion
    OCLFinalBlowUp                  = OCL_MIGDeathFinalBlowUp_CinematicVersion
  End

  Behavior = WeaponSetUpgrade ModuleTag_04
    TriggeredBy = Upgrade_ChinaBlackNapalm
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 500.0
  End

  Behavior = JetAIUpdate ModuleTag_06
    OutOfAmmoDamagePerSecond  = 10%     ; amount of damage to take per SEC (not per frame) when out of ammo
                                        ; note that it's expressed as a percent of max health, not an absolute
    TakeoffDistForMaxLift     = 0%   ; larger numbers give more lift sooner when taking off
    TakeoffPause              = 500
    MinHeight                 = 5
    ReturnToBaseIdleTime      = 10000         ; if idle for this long, return to base, even if not out of ammo
  End

  Locomotor = SET_NORMAL CINE_MIGLocomotor
  Locomotor = SET_TAXIING CINE_BasicJetTaxiLocomotor


  Behavior = FlammableUpdate ModuleTag_08
    AflameDuration = 5000        ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500      ; this often.
  End

  Behavior                       = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes Psys:SmokeSmallContinuous01
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_MIGDamageTransition
  End

  Behavior        = MaxHealthUpgrade ModuleTag_10
    TriggeredBy   = Upgrade_ChinaAircraftArmor
    AddMaxHealth  = 40.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End



  Geometry                 = Box
  GeometryIsSmall          = Yes
  GeometryMajorRadius      = 14.0
  GeometryMinorRadius      = 7.0
  GeometryHeight           = 5.0
  Shadow                   = SHADOW_VOLUME
  
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End





;------------------------------------------------------------------------------
;************************** Cinematic-only unit *******************************
;China Dragon Tank
Object CINE_ChinaTankDragon

  ; *** ART Parameters ***
  SelectPortrait         = SNDragonTank_L
  ButtonImage            = SNDragonTank
  
  UpgradeCameo1 = Upgrade_ChinaBlackNapalm
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = NVDragon
      Turret = Turret
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End
    ConditionState = REALLYDAMAGED
      Model = NVDragon_D
      Turret = Turret
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End
    ConditionState = RUBBLE
      Model = NVDragon_D
      Turret = Turret
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End
    
    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Dragon
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY DragonTankFlameWeapon
    Weapon = SECONDARY DragonTankFireWallWeapon
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = PRIMARY DragonTankFlameWeaponUpgraded
    Weapon = SECONDARY DragonTankFireWallWeaponUpgraded
    AutoChooseSources = SECONDARY NONE
  End

  ArmorSet
    Conditions      = None
    Armor           = DragonTankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 800
  BuildTime       = 10.0          ;in seconds    
  VisionRange     = 100
  ShroudClearingRange = 200
  Prerequisites
    Object = ChinaWarFactory
  End

  ExperienceValue = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = ChinaTankDragonCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = DragonTankVoiceSelect
  VoiceMove = DragonTankVoiceMove
  VoiceGuard = DragonTankVoiceMove
  VoiceAttack = DragonTankVoiceAttack
  SoundMoveStart = DragonTankMoveStart
  SoundMoveStartDamaged = DragonTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = DragonTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceEnter = DragonTankVoiceMove
    VoiceFlameLocation = DragonTankVoiceFireStorm
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE 
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 280.0
    InitialHealth   = 280.0
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 120
      TurretPitchRate = 120

      TurretFireAngleSweep = PRIMARY 10
      TurretFireAngleSweep = SECONDARY 60
      TurretSweepSpeedModifier = PRIMARY 0.5    ; Sweep slower than you turn (aim for 30 for art)
      TurretSweepSpeedModifier = SECONDARY 2.0  ; Sweep faster than you turn
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL CINE_DragonLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End


  Behavior = WeaponSetUpgrade ModuleTag_05
    TriggeredBy = Upgrade_ChinaBlackNapalm
  End

  ; A crushing defeat
  Behavior = DestroyDie ModuleTag_06
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = FXListDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_09
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End


  ; just explode death
  Behavior = SlowDeathBehavior ModuleTag_10
    DeathTypes = ALL -CRUSHED -SPLATTED
;    ProbabilityModifier = 33
    DestructionDelay = 500
    DestructionDelayVariance = 500
    FX  = INITIAL  FX_BattleMasterExplosionOneFinal
    OCL = FINAL    OCL_DragonDebris
    FX  = FINAL    FX_DragonTankDeathExplosionFinal
  End
  
  ; Catch fire, and explode death
;  Behavior = SlowDeathBehavior
;    DeathTypes = ALL -CRUSHED -SPLATTED
;;    ProbabilityModifier = 33
;    DestructionDelay = 2000
;    DestructionDelayVariance = 300
;    FX  = INITIAL  FX_CrusaderCatchFire
;    OCL = FINAL    OCL_DragonDebris  
;    FX  = FINAL    FX_GenericTankDeathExplosion 
;  End

  ; Napalm spills out, and explode death
;  Behavior = SlowDeathBehavior
;    DeathTypes = ALL -CRUSHED -SPLATTED
;;    ProbabilityModifier = 34
;    DestructionDelay = 2000
;    DestructionDelayVariance = 300
;    FX  = INITIAL  FX_DragonNapalmSpill
;    OCL = FINAL    OCL_DragonDebris  
;    FX  = FINAL    FX_DragonTankDeathExplosionFinal
;  End

  ; Turret fly off death
;  Behavior = SlowDeathBehavior
;    DeathTypes = ALL -CRUSHED -SPLATTED
;;    ProbabilityModifier = 25
;    DestructionDelay = 500
;    DestructionDelayVariance = 100
;    FX  = INITIAL  FX_GenericTankDeathEffect
;    OCL = MIDPOINT OCL_DragonDebris
;    FX  = FINAL    FX_GenericTankDeathExplosionFinal
;  End


  Behavior = FlammableUpdate ModuleTag_12
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_13
;   ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes Psys:SmokeSmallContinuous01
    ReallyDamagedParticleSystem2 = Bone:Smoke RandomBone:Yes Psys:DragonTransitionFire
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_DragonDamageTransition
  End

  Geometry = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 15.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME    

End

;------------------------------------------------------------------------------
;*************************** Cinematic-only unit ******************************
Object CINE_ChinaInfantryBlackLotus

  ; *** ART Parameters ***
  SelectPortrait         = SNBlkLotus_L2
  ButtonImage            = SNBlkLotus2
  
  ;UpgradeCameo1 = NONE
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
    
    ; --- idle
    DefaultConditionState
      Model             = NIHERO_SKN
      IdleAnimation     = NIHERO_SKL.NIHERO_STA 0 17
      IdleAnimation     = NIHERO_SKL.NIHero_IDA
      IdleAnimation     = NIHERO_SKL.NIHero_IDB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Stand
    End

    ConditionState      = REALLYDAMAGED
      IdleAnimation     = NIHERO_SKL.NIHERO_ISTA 0 30
      IdleAnimation     = NIHERO_SKL.NIHero_IIDA
      AnimationMode     = ONCE
      TransitionKey     = TRANS_StandInjured
    End

    TransitionState     = TRANS_Stand TRANS_StandInjured
      Animation         = NIHero_SKL.NIHero_ISTAHIT
      AnimationMode     = ONCE
    End

    ; --- moving
    ConditionState      = MOVING
      Animation         = NIHero_SKL.NIHero_RNA 20 ;used to have no value here
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING UNPACKING

    ConditionState      = MOVING REALLYDAMAGED
      Animation         = NIHero_SKL.NIHero_IRNA
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING UNPACKING REALLYDAMAGED

    ; --- packing states
    ConditionState      = UNPACKING
      ;Preparing to attack (unpacking gear)
      Animation         = NIHero_SKL.NIHero_ATA1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING FIRING_A

    ConditionState      = FIRING_A
      ;Processing attack (hacking)
      Animation         = NIHero_SKL.NIHero_ATA2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringA
    End

    ConditionState      = PACKING
      ;Completing attack (packing gear)
      Animation         = NIHero_SKL.NIHero_ATA3
      AnimationMode     = ONCE
    End
    AliasConditionState = FIRING_A PACKING 

    TransitionState     = TRANS_FiringA TRANS_FiringAInjured
      Animation         = NIHero_SKL.NIHero_IATAHIT
      AnimationMode     = ONCE
    End

    ; --- injured-packing states
    ConditionState      = UNPACKING REALLYDAMAGED
      ;Preparing to attack (unpacking gear)
      Animation         = NIHero_SKL.NIHero_IATA1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING FIRING_A REALLYDAMAGED

    ConditionState      = FIRING_A REALLYDAMAGED
      ;Processing attack (hacking)
      Animation         = NIHero_SKL.NIHero_IATA2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringAInjured
    End

    ConditionState      = PACKING REALLYDAMAGED
      ;Completing attack (packing gear)
      Animation         = NIHero_SKL.NIHero_IATA3
      AnimationMode     = ONCE
    End
    AliasConditionState = FIRING_A PACKING REALLYDAMAGED

    ; --- packing-dying states
; code doesn't really support this. Oh well.
;    ConditionState      = DYING RAISING_FLAG
;      Animation         = NIHero_SKL.NIHero_IDTA
;      Animation         = NIHero_SKL.NIHero_IDTB
;      AnimationMode     = ONCE
;    End
;    AliasConditionState = DYING RAISING_FLAG EXPLODED_FLAILING EXPLODED_BOUNCING

    ; --- normal-dying states
    ConditionState      = DYING
      Animation         = NIHero_SKL.NIHero_DTA
      Animation         = NIHero_SKL.NIHero_DTB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = NIHero_SKL.NIHero_ADTF1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = NIHero_SKL.NIHero_ADTF2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = NIHero_SKL.NIHero_ADTF3
      AnimationMode     = ONCE
      TransitionKey     = None
    End

    ; --- cheering states
    ConditionState      = SPECIAL_CHEERING
      Animation         = NIHERO_SKL.NIHERO_CHA
      AnimationMode     = ONCE
    End

    ConditionState      = SPECIAL_CHEERING REALLYDAMAGED
      Animation         = NIHERO_SKL.NIHERO_ICHA
      AnimationMode     = ONCE
    End

    ; --- falling states
    ConditionState      = FREEFALL
      Animation         = NIHero_SKL.NIHero_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState      = PARACHUTING
      Animation         = NIHero_SKL.NIHero_PHG
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState     = TRANS_Falling TRANS_Chute
      Animation         = NIHero_SKL.NIHero_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = NIHero_SKL.NIHero_PTD
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_Chute TRANS_StandInjured
      Animation         = NIHero_SKL.NIHero_PTD
      AnimationMode     = ONCE
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:BlackLotus
  Side                = China
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY None
  End
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange         = 150
  ShroudClearingRange = 300
  Prerequisites
    Object = ChinaBarracks
    Object = ChinaPropagandaCenter
  End
  BuildCost             = 1500
  BuildTime             = 20.0          ;in seconds    
  MaxSimultaneousOfType = 1
  CommandSet            = ChinaInfantryBlackLotusCommandSet

  ExperienceValue       = 50 100 150 400    ;Experience point value at each level
  ExperienceRequired    = 0 150 450 900  ;Experience points needed to gain each level
  IsTrainable           = Yes             ;Can gain experience
  CrushableLevel        = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet            = ChinaInfantryBlackLotusCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BlackLotusVoiceSelect
  VoiceMove = BlackLotusVoiceMove
  VoiceAttack = NoSound
  VoiceGuard = BlackLotusVoiceMove
  VoiceFear = BlackLotusVoiceFear
  VoiceTaskComplete = BlackLotusVoiceCaptureComplete
  SoundStealthOn = StealthOn
  SoundStealthOff = StealthOff
  
  UnitSpecificSounds
    VoiceCreate          = BlackLotusVoiceCreate
    VoiceGarrison = BlackLotusVoiceMove
    VoiceEnter = BlackLotusVoiceMove
    VoiceEnterHostile = BlackLotusVoiceMove
    VoiceStealCashComplete = BlackLotusVoiceCashComplete
    VoiceDisableVehicleComplete = BlackLotusVoiceDisableComplete
    VoiceCaptureBuildingComplete = BlackLotusVoiceCaptureComplete
    VoiceGetHealed      = BlackLotusVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_03 ; allows use of command button hunt script with this unit. 
  End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = No
  End
  Locomotor = SET_NORMAL CINE_BlackLotusLocomotor
  Locomotor = SET_FREEFALL FreeFallLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 5.0
  End
  Behavior = StealthUpdate ModuleTag_07
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = USING_ABILITY
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    EnemyDetectionEvaEvent      = EnemyBlackLotusDetected
    OwnDetectionEvaEvent        = OwnBlackLotusDetected
  End


  Behavior = SpecialAbility ModuleTag_08
    SpecialPowerTemplate = SpecialAbilityBlackLotusCaptureBuilding
    UpdateModuleStartsAttack = Yes
    InitiateSound         = BlackLotusVoiceHackBuilding
  End
  Behavior = SpecialAbilityUpdate ModuleTag_09
    SpecialPowerTemplate  = SpecialAbilityBlackLotusCaptureBuilding
    StartAbilityRange     = 150.0
    UnpackTime            = 6730 ;animation time is 6730 (changing this will scale anim speed)
    PackTime              = 2800 ;animation time is 5800 (changing this will scale anim speed)
    PreparationTime       = 6000 ;time to complete hack once prepared (unpacked)
    SpecialObject         = BinaryDataStream
    DoCaptureFX           = Yes
    PackSound             = BlackLotusPack
    UnpackSound           = BlackLotusUnpack
    TriggerSound          = BlackLotusTrigger
    PrepSoundLoop         = BlackLotusPrepLoop
  End
  Behavior = SpecialAbility ModuleTag_10
    SpecialPowerTemplate      = SpecialAbilityBlackLotusDisableVehicleHack
    UpdateModuleStartsAttack  = Yes
    InitiateSound           = BlackLotusVoiceHackVehicle
  End
  Behavior = SpecialAbilityUpdate ModuleTag_11
    SpecialPowerTemplate    = SpecialAbilityBlackLotusDisableVehicleHack
    StartAbilityRange       = 150.0
    UnpackTime              = 6730 ;animation time is 6730 (changing this will scale anim speed)
    PackTime                = 2800 ;animation time is 5800 (changing this will scale anim speed)
    PreparationTime         = 2000 ;time to complete hack once prepared (unpacked)
    EffectDuration          = 30000 ;duration vehicle is disabled  (30 seconds)
    DisableFXParticleSystem = DisabledEffectBinaryShower0
    SpecialObject           = BinaryDataStream
    PackSound               = BlackLotusPack
    UnpackSound             = BlackLotusUnpack
    TriggerSound            = BlackLotusTrigger
    PrepSoundLoop           = BlackLotusPrepLoop
  End
  Behavior = SpecialAbility ModuleTag_12
    SpecialPowerTemplate      = SpecialAbilityBlackLotusStealCashHack
    UpdateModuleStartsAttack  = Yes
    InitiateSound         = BlackLotusVoiceHackCash
  End
  Behavior = SpecialAbilityUpdate ModuleTag_13
    SpecialPowerTemplate  = SpecialAbilityBlackLotusStealCashHack
    StartAbilityRange     = 150.0
    UnpackTime            = 6730 ;animation time is 6730 (changing this will scale anim speed)
    PackTime              = 5800 ;animation time is 5800 (changing this will scale anim speed)
    PreparationTime       = 6000 ;time to complete hack once prepared (unpacked)
    EffectValue           = 1000 ;amount of cash stolen
    SpecialObject         = BinaryDataStream
    PackSound             = BlackLotusPack
    UnpackSound           = BlackLotusUnpack
    TriggerSound          = BlackLotusTrigger
    PrepSoundLoop         = BlackLotusPrepLoop
  End
 
  Behavior = SquishCollide ModuleTag_14
    ;nothing
  End


; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_BlackLotusDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_BlackLotusDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireFemale
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinFemale
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinFemale
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End

  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinFemale
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_17
    PoisonDamageInterval  = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration        = 3000       ; ... for this long after last hit by poison damage
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End




;------------------------------------------------------------------------------
;************************ Cinematic-only unit *********************************
Object CINE_ChinaAmbassador

    ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = NIAMBSDR_SKN
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_IDA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_IDB
      AnimationMode = ONCE
      TransitionKey = TRANS_Stand
    End
        
    ConditionState = MOVING
      Animation = NIAMBSDR_SKL.NIAMBSDR_RNA ;***was using WKA but it doesn't exist so I changed it to kill the assert -- Kris 
      AnimationMode = LOOP
      Flags = RANDOMSTART
    End

    ConditionState = MOVING PANICKING
      Animation = NIAMBSDR_SKL.NIAMBSDR_RNA 
      AnimationMode = LOOP
      Flags = RANDOMSTART
    End

    ConditionState = DYING
      Animation = NIAMBSDR_SKL.NIAMBSDR_DTA
      Animation = NIAMBSDR_SKL.NIAMBSDR_DTB
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    ;TransitionState = TRANS_Dying TRANS_Flailing
    ;  Animation = NIAMBSDR_SKL.NIAMBSDR_ADTD1
    ;  AnimationMode = ONCE
    ;End

    ;ConditionState = DYING EXPLODED_FLAILING
    ;  Animation = NIAMBSDR_SKL.NIAMBSDR_ADTD2
    ;  AnimationMode = LOOP
    ;  TransitionKey = TRANS_Flailing
    ;End

    ;ConditionState = DYING EXPLODED_BOUNCING
    ;  Animation = NIAMBSDR_SKL.NIAMBSDR_ADTD3
    ;  AnimationMode = ONCE
    ;  TransitionKey = None
    ;End
  End

  ; ***DESIGN parameters ***
  Buildable           = No
  DisplayName         = OBJECT:Ambassador
  Side                = China
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    ; no weapons
  End
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 150
  ShroudClearingRange = 150

  ExperienceValue = 50 100 150 400    ;Experience point value at each level
  ExperienceRequired = 0 150 450 900  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience

  ; *** AUDIO Parameters ***

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 50.0
    InitialHealth   = 50.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL CINE_BasicHumanLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End
  Behavior = SlowDeathBehavior ModuleTag_05
    SinkDelay = 3000
    SinkRate = 0.5     ; in Dist/Sec
    DestructionDelay = 8000
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End

  Behavior = FXListDie ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DeathFX = FX_RedGuardDie
  End
  Behavior = FXListDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_GIDieCrushed
  End

  Behavior = PoisonedBehavior ModuleTag_09
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14
  ShadowSizeY = 14
  ShadowTexture = ShadowI
  BuildCompletion = APPEARS_AT_RALLY_POINT

End



Object Cine_GrinderCannonMine ;we don't shoot the anti mine spam weapon.

  Draw = W3DModelDraw ModuleTag_01
    DefaultConditionState
      Model         = NVGrinder_MN
      Animation     = NVGrinder_MN.NVGrinder_MN
      AnimationMode = LOOP
    End
  End


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Mine
  Side             = ChinaSpecialWeaponsGeneral
  EditorSorting    = STRUCTURE

  VisionRange     = 50.0           ; Shroud clearing distance
  ShroudClearingRange     = 50.0           ; Shroud clearing distance


  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    SuicideWeapon ;Used for mode matching only (when to detonate)
    Weapon = SECONDARY  SuicideWeapon ;Used for mode matching only (when to detonate)
    Weapon = TERTIARY   SuicideWeapon ;Used for mode matching only (when to detonate)
    AutoChooseSources = PRIMARY   NONE
    AutoChooseSources = SECONDARY NONE
    AutoChooseSources = TERTIARY  NONE
  End
  
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = DefaultDamageFX ; Too small for normal building FX, but if we do make dedicated one it should be silent
  End
  
  CommandSet      = ChinaGrinderMineCommandSet

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD IMMOBILE IMMUNE_TO_CAPTURE DEMOTRAP STRUCTURE CLEARED_BY_BUILD ;SELECTABLE
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 0.01
    InitialHealth   = 0.01
  End
  
  Behavior = AIUpdateInterface ModuleTag_033268
  End


  Behavior = StealthUpdate ModuleTag_03
    StealthDelay = 0 ; msec
    StealthForbiddenConditions = NONE
    FriendlyOpacityMin = 100.0%
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = DemoTrapUpdate ModuleTag_04
    DefaultProximityMode      = Yes       ;If yes, defaults to proximity mode, otherwise defaults to manual.
    DetonationWeaponSlot      = PRIMARY   ;The slot the weapon is in when it detonates.
    ProximityModeWeaponSlot   = SECONDARY ;The slot proximity mode is determined by (bogus weapon)
    ManualModeWeaponSlot      = TERTIARY  ;The slot manual mode is determined by (bogus weapon)
    TriggerDetonationRange    = 30.0      ;Detonation range when in proximity mode (and must be on ground)
    IgnoreTargetTypes         = PROJECTILE UNATTACKABLE DOZER
    AutoDetonationWithFriendsInvolved = Yes
    DetonateWhenKilled        = Yes
  End
  
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Detonate33
    DeathWeapon   = GrinderCannonMinePopWeapon
    StartsActive  = Yes
  End

  Behavior = FXListDie ModuleTag_09343
    DeathFX = WeaponFX_GrinderMinePop
  End

;  Behavior = FireWeaponUpdate ModuleTag_AntiMineSpam01
;    Weapon = GrinderCannonMineAntiSpamWeapon
;    InitialDelay = 100
;  End
  
  Behavior = DestroyDie ModuleTag_0932
  End

  BuildCompletion = PLACED_BY_PLAYER
  
  Shadow          = SHADOW_VOLUME
  Geometry = CYLINDER
  GeometryMajorRadius = 4.0
  GeometryHeight = 9    
  GeometryIsSmall = Yes 

End


;------------------------------------------------------------------------------
; @todo  -- this entire unit is "first pass only" and needs lots of specialization
Object ChinaInfantrySecretPolice

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; @todo srj -- all these states are using placeholder art; need to add anims, etc.
    DefaultConditionState
      Model = NIHacker
    End

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:SecretPolice
  Side = China
  EditorSorting = INFANTRY
  TransportSlotCount = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY None
  End
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 150
  ShroudClearingRange = 150
  Prerequisites
    Object = ChinaBarracks
  End
  BuildCost = 100
  BuildTime = 3.0          ;in seconds    

  ExperienceValue = 50 100 150 400    ;Experience point value at each level
  ExperienceRequired = 0 150 450 900  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience

  ; *** AUDIO Parameters ***
  VoiceSelect = RedGuardVoiceSelect
  VoiceMove = RedGuardVoiceMove
  VoiceAttack = RedGuardVoiceAttack

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 50.0
    InitialHealth   = 50.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL BasicHumanLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End
  Behavior = SlowDeathBehavior ModuleTag_05
    SinkDelay = 3000
    SinkRate = 0.5     ; in Dist/Sec
    DestructionDelay = 8000
  End

 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End


  Behavior = FXListDie ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DeathFX = FX_RedGuardDie
  End
  Behavior = FXListDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_GIDieCrushed
  End

  Behavior = PoisonedBehavior ModuleTag_09
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End





; -----------------------------------------------------------------------------

Object ChinaTankOverlordBarrelDebris

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = NVOvrlrd_D3
    End
  End

  ; ***DESIGN parameters ***
;  DisplayName      = OBJECT:RocketBuggyDebris

  EditorSorting   = DEBRIS
  Side = China

  ArmorSet
    Conditions      = None
    Armor           = InvulnerableArmorForFlamingAndToxinIfnantry
    DamageFX        = TankDamageFX
  End

  ; *** AUDIO Parameters ***
  ; *** ENGINEERING Parameters ***
;  RadarPriority = UNIT
;  KindOf = PRELOAD CAN_CAST_REFLECTIONS 

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1.0
    InitialHealth   = 1.0
  End

  Behavior = PhysicsBehavior ModuleTag_03
    Mass = 50
    AllowBouncing = Yes
  End

  Behavior = LifetimeUpdate ModuleTag_04
    MinLifetime = 10000   ; min lifetime in msec
    MaxLifetime = 15000   ; max lifetime in msec
  End


  Behavior = SlowDeathBehavior ModuleTag_05
    SinkDelay = 1000
    SinkRate = 1     ; in Dist/Sec
    DestructionDelay = 2000
  End

  Geometry = BOX
  GeometryMajorRadius = 9.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes    


End



;------------------------------------------------------------------------------
Object ChinaVehicleTroopCrawlerEmpty

  ; *** ART Parameters ***
  SelectPortrait         = SNTransport_L
  ButtonImage            = SNTransport
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
    TrackMarks = EXTireTrack.tga
    ConditionState = NONE
      Model = NVTCrawler
    End
    ConditionState       = REALLYDAMAGED
      Model              = NVTCrawler_D
    End
    ConditionState       = RUBBLE
      Model              = NVTCrawler_D
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TroopCrawler
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 8                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY TroopCrawlerAssault
  End
  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 700
  BuildTime       = 1.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 150
  Prerequisites
    Object = ChinaWarFactory
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = ChinaTroopCrawlerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = TroopCrawlerVoiceSelect
  VoiceMove = TroopCrawlerVoiceMove
  VoiceGuard = TroopCrawlerVoiceMove
  VoiceAttack = TroopCrawlerVoiceAttack
  SoundMoveStart = TroopCrawlerMoveStart
  SoundMoveStartDamaged = TroopCrawlerMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = TroopCrawlerVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoop
    VoiceUnload     = TroopCrawlerVoiceUnload
    VoiceEnter = TroopCrawlerVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS TRANSPORT VEHICLE SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY
    End
  End
  Locomotor = SET_NORMAL TroopCrawlerLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End


  Behavior = SlowDeathBehavior  ModuleTag_05
    DeathTypes = ALL
    ProbabilityModifier = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay = 0
    DestructionDelayVariance = 200
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_FinalTroopCrawlerDebris
  End
    
  Behavior = TransportContain ModuleTag_06
    Slots = 8
    HealthRegen%PerSec = 10
    DamagePercentToUnits = 10%
    AllowInsideKindOf  = INFANTRY
  End


  ; A crushing defeat
  Behavior = FXListDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_09
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 22.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 13.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   

End




;------------------------------------------------------------------------------
;
; Jason Bender sez:
; This unit is used in GLA04. It is part of a secondary objective. The player gets a medal for capturing him.
; This unit is never human-controllable!
;
Object ChinaAmbassador

    ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = NIAMBSDR_SKN
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_IDA
      IdleAnimation = NIAMBSDR_SKL.NIAMBSDR_IDB
      AnimationMode = ONCE
      TransitionKey = TRANS_Stand
    End
        
    ConditionState = MOVING
      Animation = NIAMBSDR_SKL.NIAMBSDR_RNA ;***was using WKA but it doesn't exist so I changed it to kill the assert -- Kris 
      AnimationMode = LOOP
      Flags = RANDOMSTART
    End

    ConditionState = MOVING PANICKING
      Animation = NIAMBSDR_SKL.NIAMBSDR_RNA 
      AnimationMode = LOOP
      Flags = RANDOMSTART
    End

    ConditionState = DYING
      Animation = NIAMBSDR_SKL.NIAMBSDR_DTA
      Animation = NIAMBSDR_SKL.NIAMBSDR_DTB
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    ;TransitionState = TRANS_Dying TRANS_Flailing
    ;  Animation = NIAMBSDR_SKL.NIAMBSDR_ADTD1
    ;  AnimationMode = ONCE
    ;End

    ;ConditionState = DYING EXPLODED_FLAILING
    ;  Animation = NIAMBSDR_SKL.NIAMBSDR_ADTD2
    ;  AnimationMode = LOOP
    ;  TransitionKey = TRANS_Flailing
    ;End

    ;ConditionState = DYING EXPLODED_BOUNCING
    ;  Animation = NIAMBSDR_SKL.NIAMBSDR_ADTD3
    ;  AnimationMode = ONCE
    ;  TransitionKey = None
    ;End
  End

  ; ***DESIGN parameters ***
  Buildable           = No
  DisplayName         = OBJECT:Ambassador
  Side                = China
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    ; no weapons
  End
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 150
  ShroudClearingRange = 150

  ExperienceValue = 50 100 150 400    ;Experience point value at each level
  ExperienceRequired = 0 150 450 900  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience

  ; *** AUDIO Parameters ***

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 50.0
    InitialHealth   = 50.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL BasicHumanLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End
  Behavior = SlowDeathBehavior ModuleTag_05
    SinkDelay = 3000
    SinkRate = 0.5     ; in Dist/Sec
    DestructionDelay = 8000
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End

  Behavior = FXListDie ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DeathFX = FX_RedGuardDie
  End
  Behavior = FXListDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_GIDieCrushed
  End

  Behavior = PoisonedBehavior ModuleTag_09
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14
  ShadowSizeY = 14
  ShadowTexture = ShadowI
  BuildCompletion = APPEARS_AT_RALLY_POINT

End



;------------------------------------------------------------------------------
;
;
; Jason Bender sez:
; This unit is used in a mission for "color".
; This unit is never human-controllable!
;
Object ChinaInfantryOfficer

    ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;NORMAL STANDING
    DefaultConditionState
      Model = NIOFCR_SKN
      IdleAnimation = NIOFCR_SKL.NIOFCR_STA 0 21
      ;Regular spice animations
      IdleAnimation = NIOFCR_SKL.NIOFCR_IDA
      IdleAnimation = NIOFCR_SKL.NIOFCR_IDB
      AnimationMode = ONCE
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      TransitionKey = TRANS_STAND
    End

    ConditionState    = MOVING
      Animation       = NIOFCR_SKL.NIOFCR_RNA
      AnimationMode   = LOOP
      ParticleSysBone     = None InfantryDustTrails
    End

    ; NORMAL ATTACK
    ;--------------------------------------------------------
    ; Drawing gun
    ConditionState  = PREATTACK_A
      Animation     = NIOFCR_SKL.NIOFCR_ATAST
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_A MOVING
    AliasConditionState = PREATTACK_A FIRING_A
    AliasConditionState = PREATTACK_A BETWEEN_FIRING_SHOTS_A

    ; Firing gun
    ConditionState  = FIRING_A
      Animation     = NIOFCR_SKL.NIOFCR_ATALP
      AnimationMode = LOOP
      TransitionKey = TRANS_FIRING_A
    End
    ConditionState  = BETWEEN_FIRING_SHOTS_A
      Animation     = NIOFCR_SKL.NIOFCR_ATALP
      AnimationMode = LOOP
      TransitionKey = TRANS_FIRING_A
    End
    AliasConditionState = RELOADING_A
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A

    ; This transition allows him to put his gun away when he's finished attacking.
    TransitionState = TRANS_FIRING_A TRANS_STAND
      Animation     = NIOFCR_SKL.NIOFCR_ATAED
      AnimationMode = ONCE
    End
    ;--------------------------------------------------------

    ConditionState  = DYING
      Animation     = NIOFCR_SKL.NIOFCR_DTA
      Animation     = NIOFCR_SKL.NIOFCR_DTB
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = NIOFCR_SKL.NIOFCR_ADTE1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = NIOFCR_SKL.NIOFCR_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = NIOFCR_SKL.NIOFCR_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
    End

    ConditionState  = SPECIAL_CHEERING
      Animation     = NIOFCR_SKL.NIOFCR_CHA
      AnimationMode = LOOP
    End

    ;PARACHUTING ANIMATIONS

    ;@TODO - MISSING ANIMATION FILE
    ;ConditionState   = FREEFALL
    ;  Animation      = NIOFCR_SKL.NIOFCR_PFL
    ;  AnimationMode  = LOOP
    ;  TransitionKey  = TRANS_Falling
    ;End
    ;AliasConditionState = FREEFALL REALLYDAMAGED
    ;AliasConditionState = FREEFALL DYING
    ConditionState  = PARACHUTING
      Animation     = NIOFCR_SKL.NIOFCR_PHG
      AnimationMode = LOOP
      Flags         = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING
    TransitionState = TRANS_Falling TRANS_Chute
      Animation     = NIOFCR_SKL.NIOFCR_POP
      AnimationMode = ONCE
      Flags         = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End
    TransitionState = TRANS_Chute TRANS_STAND
      Animation     = NIOFCR_SKL.NIOFCR_PTD
      AnimationMode = ONCE
    End

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Officer
  Side = China
  EditorSorting = INFANTRY
  TransportSlotCount = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY ChinaOfficerMachineGun
  End
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 150
  ShroudClearingRange = 150
  Prerequisites
    Object = ChinaBarracks
  End

  BuildCost     = 400
  BuildTime     = 10.0          ;in seconds      

  ; *** AUDIO Parameters ***
  VoiceSelect = RedGuardVoiceSelect
  VoiceGroupSelect = BattleCrySound
  VoiceMove = RedGuardVoiceMove
  VoiceAttack = RedGuardVoiceAttack

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY 
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL BasicHumanLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End


; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RedGuardDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RedGuardDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireChina
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantry 
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_09
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End



;------------------------------------------------------------------------------
;
; ??? This unit is used in a mission for "color".
; This unit is never human-controllable!
; @todo srj -- is this used for ANYTHING?
;
Object ChinaInfantryAgent

    ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;NORMAL STANDING
    DefaultConditionState
      Model = AIRngr_SKN
      IdleAnimation = AIRngr_SKL.AIRngr_STA 0 21
      ;Regular spice animations
      IdleAnimation = AIRngr_SKL.AIRngr_IDA
      IdleAnimation = AIRngr_SKL.AIRngr_IDB
      AnimationMode = ONCE
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      TransitionKey = TRANS_Stand
    End

    ; NORMAL ATTACK (Cutting fence via wirecutters)
    ConditionState = PREATTACK_A 
      Animation = AIRngr_SKL.AIRngr_ATA
      AnimationMode = ONCE
      TransitionKey = TRANS_FiringA
    End
    AliasConditionState = FIRING_A
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    AliasConditionState = RELOADING_A
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A
    AliasConditionState = FIRING_A REALLYDAMAGED
    AliasConditionState = BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState = RELOADING_A REALLYDAMAGED

    ; SECONDARY ATTACK (Flash-bang grenades)
    ConditionState = FIRING_B 
      Animation = AIRngr_SKL.AIRngr_ATB 
      AnimationMode = ONCE
      WeaponFireFXBone = SECONDARY Muzzle
      WeaponLaunchBone = SECONDARY Muzzle
      TransitionKey = TRANS_FiringB
    End

    AliasConditionState = BETWEEN_FIRING_SHOTS_B
    AliasConditionState = RELOADING_B

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = MOVING FIRING_B
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_B
    AliasConditionState = MOVING RELOADING_B

    ConditionState = MOVING
      Animation = AIRngr_SKL.AIRngr_RNA 15
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = None
      ParticleSysBone     = None InfantryDustTrails
    End

    ConditionState = MOVING REALLYDAMAGED
      ;
      ; there is a new, optional number following the animation...
      ; it represents the distance that a single loop the animation would
      ; cover. (ie, maybe it has the solder taking three strides, for a 
      ; distance of 30 or so)
      ;
      ; how to tweak the number:
      ;   -- "skidding"?          reduce the number
      ;   -- "running in place"?  increase the number
      ;
      ; note that playing animations at abormal speeds may look odd in some cases.
      ; (e.g., a "limping" animation played too fast looks really odd.)
      ;
      Animation = AIRngr_SKL.AIRngr_RNB 30
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = None
      ParticleSysBone     = None InfantryDustTrails
    End

    ConditionState = DYING
      Animation = AIRngr_SKL.AIRngr_DTA
      Animation = AIRngr_SKL.AIRngr_DTB
      AnimationMode = ONCE
      TransitionKey = None
    End

    ConditionState = SPECIAL_CHEERING
      Animation = AIRngr_SKL.AIRngr_CHA
      AnimationMode = LOOP
    End

    ;PARACHUTING ANIMATIONS
    ConditionState = FREEFALL
      Animation = AIRngr_SKL.AIRngr_PFL
      AnimationMode = LOOP
      TransitionKey = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING
    ConditionState = PARACHUTING
      Animation = AIRngr_SKL.AIRngr_PHG
      AnimationMode = LOOP
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING
    TransitionState = TRANS_Falling TRANS_Chute
      Animation = AIRngr_SKL.AIRngr_POP
      AnimationMode = ONCE
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End
    TransitionState = TRANS_Chute TRANS_Stand
      Animation = AIRngr_SKL.AIRngr_PTD
      AnimationMode = ONCE
    End

    ; RAPPELLING ANIMATIONS
    ConditionState = RAPPELLING
      Animation = AIRngr_SKL.AIRngr_RPL1 ;30
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_Rappelling
    End
    AliasConditionState = MOVING RAPPELLING

    TransitionState = TRANS_Rappelling TRANS_Stand
      Animation = AIRngr_SKL.AIRngr_RPL2
      AnimationMode = ONCE
    End

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Agent
  Side = China
  EditorSorting = INFANTRY
  TransportSlotCount = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY RedguardMachineGun
  End
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 150
  ShroudClearingRange = 150
  Prerequisites
    Object = ChinaBarracks
    Object = ChinaPropagandaCenter
  End

  BuildCost     = 600
  BuildTime     = 20.0          ;in seconds      

  ExperienceValue = 50 100 150 400    ;Experience point value at each level
  ExperienceRequired = 0 150 450 900  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience

  ; *** AUDIO Parameters ***
  VoiceSelect = RedGuardVoiceSelect
  VoiceGroupSelect = BattleCrySound
  VoiceMove = RedGuardVoiceMove
  VoiceAttack = RedGuardVoiceAttack

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
  End

  Behavior = StealthUpdate ModuleTag_04
    StealthDelay                = 2000 ; msec
    StealthForbiddenConditions  = ATTACKING
    FriendlyOpacityMin          = 50.0%
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = AIUpdateInterface ModuleTag_05
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL BasicHumanLocomotor
  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 5.0
  End
  Behavior = SlowDeathBehavior ModuleTag_07
    SinkDelay = 3000
    SinkRate = 0.5     ; in Dist/Sec
    DestructionDelay = 8000
  End

 
  Behavior = SquishCollide ModuleTag_08
    ;nothing
  End


  Behavior = FXListDie ModuleTag_09
    DeathTypes = ALL -CRUSHED -SPLATTED
    DeathFX = FX_RedGuardDie
  End
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_GIDieCrushed
  End

  Behavior = PoisonedBehavior ModuleTag_11
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End




;------------------------------------------------------------------------------
Object ChinaArtilleryCannon

  ; *** ART Parameters ***

  ; ***DESIGN parameters ***
  ;DisplayName        = OBJECT:A10Thunderbolt
  EditorSorting       = VEHICLE
  Side                = China
  TransportSlotCount  = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  VisionRange         = 99999.0 
  ShroudClearingRange = 0
  ArmorSet
    Conditions      = None
    Armor           = AirplaneArmor
    DamageFX        = None
  End


  ; *** AUDIO Parameters ***
  ; In the Activation of the superweapon, where it plays only once instead of once per missile.
;  SoundMoveStart = FireArtilleryCannonSound


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_ATTACK VEHICLE AIRCRAFT UNATTACKABLE IGNORED_IN_GUI EMP_HARDENED
  Body = ActiveBody ModuleTag_01
    MaxHealth       = 200.0
    InitialHealth   = 200.0
  End

  Behavior = DestroyDie ModuleTag_02
    ;nothing
  End
 
  Behavior = PhysicsBehavior ModuleTag_03
    Mass = 0.001 ; about the weight of grain of salt
  End

  Behavior = DeliverPayloadAIUpdate ModuleTag_05
  End

  Locomotor = SET_NORMAL ChinaArtilleryBarrageCannonLocomotor

  Geometry = Cylinder
  GeometryIsSmall = Yes
  GeometryMajorRadius = 1.0
  GeometryMinorRadius = 1.0
  GeometryHeight = 1.0
  Shadow = SHADOW_DECAL
  ShadowSizeX = 1;
  ShadowSizeY = 1;
  ShadowTexture = ShadowI;

End

;------------------------------------------------------------------------------


;------------------------------------------------------------------------------
Object HelixBlades

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    DefaultConditionState
      Model = NVHelix_prop
      Animation = NVHelix_prop.NVHelix_prop
      AnimationMode = LOOP
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Comanche
  Side = China

  ; *** ENGINEERING Parameters ***
  KindOf = PRELOAD IMMOBILE

  Behavior = PhysicsBehavior ModuleTag_02
    AllowBouncing = No
  End
  Behavior = LifetimeUpdate ModuleTag_03
    MinLifetime = 1000   ; min lifetime in msec
    MaxLifetime = 2000   ; max lifetime in msec
  End

  Behavior = DestroyDie ModuleTag_die
  End



End

;------------------------------------------------------------------------------
Object MiGDodger
  Draw = W3DModelDraw ModuleTag_01
    DefaultConditionState
      Model = None
    End
  End
  KindOf = PROJECTILE
  Behavior = PhysicsBehavior ModuleTag_03
    Mass = 5
  End
  Behavior = AIUpdateInterface ModuleTag_04
    ; nothing
  End
  Locomotor = SET_NORMAL MiGDodgerLocomotor

  Behavior = LifetimeUpdate ModuleTag_05
    MinLifetime = 3000   ; min lifetime in msec
    MaxLifetime = 3000   ; max lifetime in msec
  End

  Behavior = DestroyDie ModuleTag_die
  End

  Geometry = Sphere
  GeometryIsSmall = Yes
  GeometryMajorRadius = 4.0
End



Object ChinaVehicleParachute

  ; *** ART Parameters ***
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    DefaultConditionState
      Model = NVVChute_A
      Animation = NVVChute_A.NVVChute_A
      AnimationMode = LOOP
    End
    ConditionState = PARACHUTING
      Model = NVVChute_B
      Animation = NVVChute_B.NVVChute_B
      AnimationMode = ONCE
    End
    ConditionState = RUBBLE
      Model = NVVChute_C
      Animation = NVVChute_C.NVVChute_C
      AnimationMode = ONCE
    End
    ConditionState = RUBBLE PARACHUTING
      Model = NVVChute_C
      Animation = NVVChute_C.NVVChute_C
      AnimationMode = ONCE
    End
  End 

  ; ***DESIGN parameters ***
  EditorSorting       = SYSTEM
  TransportSlotCount  = 10                 
  VisionRange         = 300.0 
  ShroudClearingRange = 300
  IsTrainable         = No  ;Can gain experience
  KindOf              = PRELOAD PARACHUTE UNATTACKABLE

  ; *** AUDIO Parameters ***

  ; *** ENGINEERING Parameters ***
  Behavior = AIUpdateInterface ModuleTag_02
    ; nothing
  End
  Locomotor = SET_NORMAL ParachuteLocomotor
  Locomotor = SET_FREEFALL FreeFallLocomotor

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 100000.0
    InitialHealth   = 100000.0
  End

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End

  Behavior = ParachuteContain ModuleTag_05
    PitchRateMax = 60           ; deg/sec
    RollRateMax = 60            ; deg/sec
    LowAltitudeDamping  = 0.2   ; how much to damp swaying when we get "close" to the ground
    ParachuteOpenDist   = 15.0  ; how far we have to fall 'till we open our 'chute
    AllowInsideKindOf   = INFANTRY VEHICLE PARACHUTABLE
    ParachuteOpenSound  = VehicleParachuteOpen
  End

  Behavior = SlowDeathBehavior ModuleTag_06
    SinkDelay = 2700
    SinkRate = 1     ; in Dist/Sec
    DestructionDelay = 6000
    OCL = INITIAL OCL_PadadropedVehicleWoodenPlate
    FX  = INITIAL FX_PadardroppedVehicleHitGround
  End

  RadarPriority = NOT_ON_RADAR
  Geometry = CYLINDER
  GeometryMajorRadius = 15.0
  GeometryHeight = 10.0
  Scale = 1.2
  GeometryIsSmall = Yes

End

;------------------------------------------------------------------------------
Object ChinaParachute

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model =NVChute
      Animation = PMparacht_SKL.PMparacht_FAL
      AnimationMode = LOOP
    End
    ConditionState = PARACHUTING
      Model =NVChute
      Animation = PMparacht_SKL.PMparacht_OPN
      AnimationMode = ONCE
    End
    ConditionState = RUBBLE
      Model =NVChute
      Animation = PMparacht_SKL.PMparacht_DRP
      AnimationMode = ONCE
    End
    ; this is a weird state to resolve an ambiguity: sometimes
    ; we can have a "rubble" parachute momentarily, that doesn't
    ; know that it has finished parachuting yet...
    ConditionState = RUBBLE PARACHUTING
      Model =NVChute
      Animation = PMparacht_SKL.PMparacht_DRP
      AnimationMode = ONCE
    End
  End 

  ; ***DESIGN parameters ***
  Side                = America
  EditorSorting       = SYSTEM
  TransportSlotCount  = 0                 
  VisionRange         = 300.0 
  ShroudClearingRange = 300
  IsTrainable         = No  ;Can gain experience
  KindOf              = PRELOAD PARACHUTE UNATTACKABLE

  ; *** AUDIO Parameters ***

  ; *** ENGINEERING Parameters ***
  Behavior = AIUpdateInterface ModuleTag_02
    ; nothing
  End
  Locomotor = SET_NORMAL ParachuteLocomotor
  Locomotor = SET_FREEFALL FreeFallLocomotor

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 100000.0
    InitialHealth   = 100000.0
  End

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End

  Behavior = ParachuteContain ModuleTag_05
    PitchRateMax = 60           ; deg/sec
    RollRateMax = 60            ; deg/sec
    LowAltitudeDamping  = 0.2   ; how much to damp swaying when we get "close" to the ground
    ParachuteOpenDist   = 25.0  ; how far we have to fall 'till we open our 'chute
    AllowInsideKindOf   = INFANTRY PARACHUTABLE
    ParachuteOpenSound  = ParachuteOpen
  End

  Behavior = SlowDeathBehavior ModuleTag_06
    SinkDelay = 1000
    SinkRate = 1     ; in Dist/Sec
    DestructionDelay = 4000
  End

  RadarPriority = NOT_ON_RADAR
  Geometry = CYLINDER
  GeometryMajorRadius = 15.0
  GeometryHeight = 10.0    
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME

End

;------------------------------------------------------------------------------
Object ChinaJetCargoPlane_Stationary

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model           = NVCargoPln
      Animation       = NVCargoPln.NVCargoPln
      AnimationMode   = LOOP
    End
    
    ConditionState = DAMAGED
      Model           = NVCargoPln_D
      Animation       = NVCargoPln_D.NVCargoPln_D
    End
    AliasConditionState = REALLYDAMAGED
    AliasConditionState = RUBBLE

  End

  ; ***DESIGN parameters ***
  Side            = China
  DisplayName     = OBJECT:Cessna
  EditorSorting   = VEHICLE

  ; ***AUDIO parameters ***
  SoundAmbient          = C130AmbientLoop
  SoundOnDamaged        = BuildingDamagedStateLight

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE
  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 500.0
    InitialHealth   = 500.0
  End
  ArmorSet
    Conditions           = None
    Armor                = StructureArmor
    DamageFX             = StructureDamageFXNoShake
  End

  Behavior = FlammableUpdate ModuleTag_04
    FlameDamageLimit = 20         ;Catch fire if I take this much fire damage...
    FlameDamageExpiration = 2000  ;in a span of this long
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 25       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = SlowDeathBehavior ModuleTag_Death01
    DestructionDelay    = 1
    FX  = INITIAL  FX_JetBigDeathInitial
    OCL = INITIAL  OCL_AmericaJetCargoDeathStart
    FX  = FINAL    FX_BigPlaneDeath
    OCL = FINAL    OCL_AmericaJetCargoHulkDeath
  End
  
  Behavior = DestroyDie ModuleTag_DeathTag03
  End

  Geometry              = BOX
  GeometryMajorRadius   = 40.0
  GeometryMinorRadius   = 10.0
  GeometryHeight        = 10.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME

End

Object ChinaShipAttackSubMarine ;; the one that is firing on the map

  ; *** ART Parameters ***
  SelectPortrait         = SNBattlemaster_L
  ButtonImage            = SNBattlemaster
  
  Draw = W3DTruckDraw ModuleTag_01

    OkToChangeModelColor = Yes
    ProjectileBoneFeedbackEnabledSlots = SECONDARY 

;;;;;Normal State
    ConditionState = None
      Model               = NVSUB
      Animation           = NVSUB.NVSUB
      AnimationMode       = ONCE
      WeaponFireFXBone    = SECONDARY WEAPONB
      WeaponLaunchBone    = SECONDARY WEAPONB
    End

    ;ConditionState = REALLYDAMAGED
    ;End
    ;ConditionState = RUBBLE
    ;End
  End

;;;;The Propeller
  Draw = W3DModelDraw ModuleTag_Proppeler

;;;;;Normal State
    ConditionState = None
      Model               = NVSUB_R
      Animation           = NVSUB_R.NVSUB_R
      AnimationMode       = ONCE_BACKWARDS
      Flags               = START_FRAME_FIRST
    End

    ConditionState = MOVING
      Model               = NVSUB_R
      Animation           = NVSUB_R.NVSUB_R
      AnimationMode       = LOOP
    End

    ;ConditionState = REALLYDAMAGED
    ;End

    ;ConditionState = MOVING REALLYDAMAGED
    ;End

    ;ConditionState = RUBBLE
    ;End
  End

  ; ***DESIGN parameters ***
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY DummyWeapon ;becouse it does not fire torpedo's on a shellmap doh!!
    Weapon = SECONDARY SubMissileWeapon
  End

  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 800
  BuildTime       = 10.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 300


  ExperienceValue = 100 100 200 400    ;Experience point value at each level
  ExperienceRequired = 0 200 300 600 ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet       = ChinaVehicleBattleMasterCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BattleMasterTankVoiceSelect
  VoiceMove = BattleMasterTankVoiceMove
  VoiceGuard = BattleMasterTankVoiceMove
  VoiceAttack = BattleMasterTankVoiceAttack
  SoundMoveStart = BattleMasterTankMoveStart
  SoundMoveStartDamaged = BattleMasterTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = BattleMasterTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceCrush = BattleMasterTankVoiceCrush
    VoiceEnter = BattleMasterTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 400.0
    InitialHealth   = 400.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 800
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    ;Turret
    ;  ControlledWeaponSlots = PRIMARY SECONDARY
    ;  TurretTurnRate = 999
    ;End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL SubmarineShellmapLocomotor ;SubmarineLocomotor they won't be able to move in this version wait for 1.0 ;)

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 40.0
  End

  Behavior = SlowDeathBehavior ModuleTag_13
    DeathTypes = ALL
    ProbabilityModifier = 25
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL    OCL_ChinaTankBattleMasterDebris
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = TransitionDamageFX ModuleTag_14
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 13.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 10     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

Object ChinaShipAttackSubMarineShellMap ; the ones that are idleing on the map

  ; *** ART Parameters ***
  SelectPortrait         = SNBattlemaster_L
  ButtonImage            = SNBattlemaster
  
  Draw = W3DTruckDraw ModuleTag_01

    OkToChangeModelColor = Yes
    ProjectileBoneFeedbackEnabledSlots = SECONDARY 

;;;;;Normal State
    ConditionState = None
      Model               = NVSUB
      Turret              = Turret
      WeaponFireFXBone    = PRIMARY WEAPONA
      WeaponLaunchBone    = PRIMARY WEAPONA
      WeaponFireFXBone    = SECONDARY WEAPONB
      WeaponLaunchBone    = SECONDARY WEAPONB
      TransitionKey       = TRANS_IdleNormal
    End

;;;;;Missile Bays opening
    TransitionState  = TRANS_IdleNormal TRANS_AttackingNormal
      Model               = NVSUB
      ;Animation           = NVSUB.NVSUB
      ;AnimationMode       = ONCE
      Turret              = Turret
      WeaponFireFXBone    = PRIMARY WEAPONA
      WeaponLaunchBone    = PRIMARY WEAPONA
      WeaponFireFXBone    = SECONDARY WEAPONB
      WeaponLaunchBone    = SECONDARY WEAPONB
    End

;;;;;Missile Bays opened and firing
    ConditionState        = USING_WEAPON_B
      Model               = NVSUB
      Turret              = Turret
      WeaponFireFXBone    = PRIMARY WEAPONA
      WeaponLaunchBone    = PRIMARY WEAPONA
      WeaponFireFXBone    = SECONDARY WEAPONB
      WeaponLaunchBone    = SECONDARY WEAPONB
      TransitionKey       = TRANS_AttackingNormal
    End

;;;;;Missile Bays Closing
    TransitionState  = TRANS_AttackingNormal TRANS_IdleNormal
      Model               = NVSUB
      ;Animation           = NVSUB.NVSUB
      ;AnimationMode       = ONCE_BACKWARDS
      Turret              = Turret
      WeaponFireFXBone    = PRIMARY WEAPONA
      WeaponLaunchBone    = PRIMARY WEAPONA
      WeaponFireFXBone    = SECONDARY WEAPONB
      WeaponLaunchBone    = SECONDARY WEAPONB
    End

    ;ConditionState = REALLYDAMAGED
    ;End
    ;ConditionState = RUBBLE
    ;End
  End

;;;;The Propeller
  Draw = W3DModelDraw ModuleTag_Proppeler

;;;;;Normal State
    ConditionState = None
      Model               = NVSUB_R
      Animation           = NVSUB_R.NVSUB_R
      AnimationMode       = ONCE_BACKWARDS
      Flags               = START_FRAME_FIRST
    End

    ConditionState = MOVING
      Model               = NVSUB_R
      Animation           = NVSUB_R.NVSUB_R
      AnimationMode       = LOOP
    End

    ;ConditionState = REALLYDAMAGED
    ;End

    ;ConditionState = MOVING REALLYDAMAGED
    ;End

    ;ConditionState = RUBBLE
    ;End
  End

  ; ***DESIGN parameters ***
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY DummyWeapon ;becouse it does not fire torpedo's on a shellmap doh!!
    Weapon = SECONDARY SubMissileWeapon
  End

  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 800
  BuildTime       = 10.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 300


  ExperienceValue = 100 100 200 400    ;Experience point value at each level
  ExperienceRequired = 0 200 300 600 ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet       = ChinaVehicleBattleMasterCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BattleMasterTankVoiceSelect
  VoiceMove = BattleMasterTankVoiceMove
  VoiceGuard = BattleMasterTankVoiceMove
  VoiceAttack = BattleMasterTankVoiceAttack
  SoundMoveStart = BattleMasterTankMoveStart
  SoundMoveStartDamaged = BattleMasterTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = BattleMasterTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceCrush = BattleMasterTankVoiceCrush
    VoiceEnter = BattleMasterTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 400.0
    InitialHealth   = 400.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 800
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    ;Turret
    ;  ControlledWeaponSlots = PRIMARY SECONDARY
    ;  TurretTurnRate = 999
    ;End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL SubmarineShellmapLocomotor ;SubmarineLocomotor they won't be able to move in this version wait for 1.0 ;)

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 40.0
  End

  Behavior = SlowDeathBehavior ModuleTag_13
    DeathTypes = ALL
    ProbabilityModifier = 25
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL    OCL_ChinaTankBattleMasterDebris
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = TransitionDamageFX ModuleTag_14
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 13.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 10     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End


Object ChinaVehicleLargeSupplyTruck

  SelectPortrait = NVLargeSupplyTruck_L
  ButtonImage    = NVLargeSupplyTruck

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes    
    DefaultConditionState
      Model = NVSUPPLYTK
      HideSubObject = Cargo01
    End    
    ConditionState = REALLYDAMAGED
      Model = NVSUPPLYTK_D
      HideSubObject = Cargo01
    End    
    ConditionState = RUBBLE
      Model = NVSUPPLYTK_D
      HideSubObject = Cargo01
    End    
    ConditionState = CARRYING
      ShowSubObject = Cargo01
    End    
    ConditionState = REALLYDAMAGED CARRYING
      Model = NVSUPPLYTK_D
      ShowSubObject = Cargo01
    End    
    ConditionState = RUBBLE CARRYING
      Model = NVSUPPLYTK_D
      ShowSubObject = Cargo01
    End
    CabBone = CAB
    TrailerBone = TRAILER
    CabRotationMultiplier = 1.5
    TrailerRotationMultiplier = 0.2

    LeftFrontTireBone           = Tire01
    RightFrontTireBone          = Tire02
    MidLeftRearTireBone         = Tire03
    MidRightRearTireBone        = Tire04
    LeftRearTireBone            = Tire05
    RightRearTireBone           = Tire06
    LeftRearTireBone            = Tire07
    RightRearTireBone           = Tire08
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

    RotationDamping = 0.7
    TrackMarks = EXTireTrack.tga
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:LargeSupplyTruck
  Side                = China
  EditorSorting       = VEHICLE
  TransportSlotCount  = 2                 ;how many "slots" we take in a transport (0 == not transportable)
  BuildCost           = 800
  BuildTime           = 10.0      ;in seconds
  VisionRange         = 150
  ShroudClearingRange = 300

  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End
  CrusherLevel            = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel          = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet              = ChinaSupplyTruckCommandSet
  ; *** AUDIO Parameters ***
  VoiceSelect             = SupplyTruckVoiceSelect
  VoiceMove               = SupplyTruckVoiceMove
  VoiceAttack             = NoSound
  SoundMoveStart          = SupplyTruckMoveStart
  SoundMoveStartDamaged = SupplyTruckMoveStart
  UnitSpecificSounds
    VoiceCreate           = SupplyTruckVoiceCreate
    TruckLandingSound     = NoSound
    TruckPowerslideSound  = NoSound
    VoiceSupply           = SupplyTruckVoiceSupply
    VoiceCrush            = SupplyTruckVoiceCrush
    VoiceEnter            = SupplyTruckVoiceMove

  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  ;@todo lorenzen removed the CAN_ATTACK from the chinasupplytruck... ok?
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS VEHICLE HARVESTER SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = SupplyTruckAIUpdate ModuleTag_03
    MaxBoxes = 8
    SupplyCenterActionDelay = 400     ; ms for whole thing (one transaction)
    SupplyWarehouseActionDelay = 1000 ; ms per box (many small transactions)
    SupplyWarehouseScanDistance = 700 ;350 ; Max distance to look for a warehouse, or we go home.  (Direct dock command on warehouse overrides, and no max on Center Scan)
    SuppliesDepletedVoice = SupplyTruckVoiceSuppliesDepleted
  End
  Locomotor = SET_NORMAL LargeSupplyTruckLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End

  ExperienceValue    = 50 50 50 50 ;Experience point value at each level

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 200
    DestructionDelayVariance = 100
    FX  = FINAL    FX_SupplyTruckExplosionOneFinal
    OCL = FINAL    OCL_ChinaLargeSupplyTruckDeathEffect
  End
    
  Behavior = FXListDie ModuleTag_06
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  
  Behavior = CreateObjectDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_ChinaLargeSupplyTruck_CrushEffect
  End

  Behavior                       = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_10
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  ; A crushing defeat
  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = EjectPilotDie ModuleTag_HijackerEmerge01
    DeathTypes = ALL -CRUSHED -SPLATTED
    RequiredStatus = HIJACKED
    VeterancyLevels =  ALL
    GroundCreationList = OCL_HijackerEmerge
    AirCreationList = OCL_HijackerEmergeViaParachute
  End
  
  Behavior = FXListDie ModuleTag_HijackerEmerge02
    RequiredStatus = HIJACKED
    DeathTypes = ALL -CRUSHED -SPLATTED
    DeathFX = FX_HijackerEmerge
  End

  Geometry = BOX
  GeometryMajorRadius = 22.0
  GeometryMinorRadius = 12.0
  GeometryHeight = 14.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End